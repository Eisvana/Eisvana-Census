import{d as ie,u as pe,s as we,o as _,c as S,a as d,b as qe,t as Z,e as m,f as $t,w as $,v as on,g as X,F as q,h as be,i as Tt,j as Tn,k as A,l as Ge,m as Ie,n as xn,p as Pn,r as ce,q as an,x as He,y as Gt,z as mt,A as gt,_ as je,B as O,C as Nn,D as Qe,E as rn,G as Vt,H as An,I as xt,J as Ze,K as ln,L as sn,M as ut,N as On,O as Fn,P as Vn,Q as Mn,R as Bn,S as Xt,T as Lt,U as Rn,V as Un,W as Gn,X as Xn,Y as Wt}from"./main-D68exycI.js";import{b as un,f as Ln,d as Wn}from"./delay-BK7pZ3Ms.js";const Yn=d("p",{class:"question"},"[OPTIONAL] Timezone",-1),zn={class:"subtitle"},qn={class:"text-bold"},Hn=d("br",null,null,-1),jn=d("p",{class:"question"},"[OPTIONAL] In this time zone, when do you play No Man's Sky the most?",-1),Zn=d("p",{class:"subtitle"}," I. e. mornings, afternoon, evenings, late night, 9 AM to 12 PM, etc. This is used in order to better plan events. ",-1),Kn=ie({__name:"TimezoneQuestions",setup(e){const t=pe(),{playerData:n}=we(t);return(e,t)=>(_(),S(q,null,[d("article",null,[Yn,d("p",zn,[qe(" Detected timezone: "),d("span",qn,Z(m($t)),1),Hn,qe(" This will be used to plan future events accordingly. This information will remain private and will only be shared with Eisvana Leadership. ")]),d("label",null,[d("span",null,"Share timezone ("+Z(m($t))+")",1),$(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).shareTimezone=e),type:"checkbox"},null,512),[[on,m(n).shareTimezone,void 0,{trim:!0}]])])]),d("article",null,[jn,Zn,$(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).activeTime=e),type:"text"},null,512),[[X,m(n).activeTime,void 0,{trim:!0}]])])],64))}}),Jn=d("p",{class:"question required"},"What is your Discord name?",-1),Qn=d("p",{class:"subtitle"},"Please enter your username, not your display name.",-1),eo=["aria-invalid","pattern"],to={key:0,class:"error"},no=d("p",{class:"question"},"What is your Reddit name?",-1),oo=["aria-invalid"],io={key:0,class:"error"},ao={key:0},ro=d("p",{class:"question"},"Social media link if you don't have Reddit",-1),lo=d("p",{class:"subtitle"}," If you don't have Reddit, do you have a different social media account that you'd like to have on the census (Facebook, Instagram, etc.)? Please put the full link here. ",-1),so=["aria-invalid"],uo={key:0,class:"error"},co=d("p",{class:"question"},"If you have a NMS Fandom wiki account, what's its name? (else leave empty)",-1),po=["aria-invalid"],fo={key:0,class:"error"},ho=d("p",{class:"question required"},"What is your ingame name?",-1),mo=d("p",{class:"subtitle"},"Found on the top left in your inventory/pause menu. Exclude any game titles.",-1),go=["aria-invalid"],vo={key:0,class:"error"},yo=d("p",{class:"question"},"No Man's Sky Friend Code",-1),bo=d("p",{class:"subtitle"},'Please enter your friend code in the following format: "XXXX-XXXX-XXXXX" including dashes.',-1),_o=["aria-invalid"],wo={key:0,class:"error"},Do=d("p",{class:"question required"},"Date of Arrival",-1),So=d("p",{class:"subtitle"},"When did you arrive in Eisvana space?",-1),Eo=ie({__name:"PlayerData",setup(e){const t=pe(),{playerData:n,validation:a,isDiscordValid:o,isRedditValid:i,isFriendValid:l,isNameValid:r,isSocialValid:s}=we(t),{friend:u,wikiName:c}=be(n.value),{wikiUserExists:p}=be(a.value);return Tt((async()=>p.value=!c.value||await xn(c.value))),Tt((()=>u.value=u.value.toUpperCase())),(e,t)=>(_(),S(q,null,[d("article",null,[Jn,Qn,$(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).discord=e),"aria-invalid":!m(o)||void 0,pattern:m(Tn),type:"text"},null,8,eo),[[X,m(n).discord,void 0,{trim:!0}]]),m(o)?A("",!0):(_(),S("p",to," Use your username, not your display name "))]),d("article",null,[no,$(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).reddit=e),"aria-invalid":!m(i)||void 0,type:"text"},null,8,oo),[[X,m(n).reddit,void 0,{trim:!0}]]),m(i)?A("",!0):(_(),S("p",io," Please use your Reddit username without the u/ "))]),m(n).reddit?A("",!0):(_(),S("article",ao,[ro,lo,$(d("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>m(n).social=e),"aria-invalid":!m(s)||void 0,type:"text"},null,8,so),[[X,m(n).social,void 0,{trim:!0}]]),m(s)?A("",!0):(_(),S("p",uo," Please give a link to that profile. "))])),d("article",null,[co,$(d("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>m(n).wikiName=e),"aria-invalid":!m(p)||void 0,type:"text"},null,8,po),[[X,m(n).wikiName,void 0,{trim:!0,lazy:!0}]]),m(p)?A("",!0):(_(),S("p",fo," This wiki user doesn't exist! "))]),d("article",null,[ho,mo,$(d("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>m(n).player=e),"aria-invalid":!m(r)||void 0,type:"text"},null,8,go),[[X,m(n).player,void 0,{trim:!0}]]),m(r)?A("",!0):(_(),S("p",vo," Please enter your ingame name, not your platform "))]),d("article",null,[yo,bo,$(d("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>m(n).friend=e),"aria-invalid":!m(l)||void 0,type:"text"},null,8,_o),[[X,m(n).friend,void 0,{trim:!0,lazy:!0}]]),m(l)?A("",!0):(_(),S("p",wo," Format must be as follows: XXXX-XXXX-XXXXX "))]),m(Ge)?(_(),S(q,{key:1},[d("article",null,[Do,So,$(d("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>m(n).arrival=e),type:"date"},null,512),[[X,m(n).arrival,void 0,{trim:!0}]])]),Ie(Kn)],64)):A("",!0)],64))}});function Io(e,t){const{target:n}=e;if(!(n instanceof HTMLInputElement))return;const a="number"==typeof t.value?parseInt(n.value):n.value;t.value===a&&(t.value=void 0)}const Co=e=>(mt("data-v-4558a41c"),e=e(),gt(),e),ko={class:"radio-select"},$o=["for"],To=["id","name","value"],xo={key:0,class:"radio-select-item-other"},Po=["for"],No=["id","name","value"],Ao=Co((()=>d("span",null,"Other:",-1))),Oo=["id"],Fo=ie({__name:"MultipleChoice",props:Pn({items:{},name:{},other:{type:Boolean}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ce(null),n=an(e,"modelValue"),a=ce(""),o=e=>Io(e,n),i=()=>n.value=a.value,l=()=>t.value?.focus();return(e,r)=>(_(),S("div",ko,[(_(!0),S(q,null,He(e.items,((t,a)=>(_(),S("label",{for:`${e.name}-${a}`,key:a,class:"multiple-choice-label"},[$(d("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e),id:`${e.name}-${a}`,name:e.name,value:t,type:"radio",onClick:o},null,8,To),[[Gt,n.value,void 0,{trim:!0}]]),d("span",null,Z(t),1)],8,$o)))),128)),e.other?(_(),S("div",xo,[d("label",{for:`${e.name}-other`,class:"other-input-label"},[$(d("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),id:`${e.name}-other`,name:e.name,value:a.value,type:"radio",onClick:o,onChange:l},null,40,No),[[Gt,n.value,void 0,{trim:!0}]]),Ao],8,Po),$(d("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>a.value=e),id:`${e.name}-other-input`,class:"input-other",ref_key:"otherInput",ref:t,type:"text",onInput:i},null,40,Oo),[[X,a.value,void 0,{trim:!0}]])])):A("",!0)]))}}),Yt=je(Fo,[["__scopeId","data-v-4558a41c"]]),Vo={class:"glyph-input"},Mo={class:"glyph-input-wrapper"},Bo=["aria-invalid","maxlength"],Ro={key:0,class:"error"},Uo={class:"portal-buttons grid"},Go=["onClick"],Xo={class:"glyph-display-wrapper"},Lo={class:"glyphs"},Wo=ie({__name:"GlyphInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=/[0-9A-F]/,n=an(e,"modelValue"),a=O((()=>n.value.slice(4)in Nn));function o(){n.value=n.value.slice(0,-1)}Tt((()=>n.value=n.value.toUpperCase().split("").filter((e=>t.test(e))).join("")));const i=e=>e.toString(16).toUpperCase();return(e,t)=>(_(),S("div",Vo,[d("div",Mo,[$(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"aria-invalid":n.value.length===m(Qe)&&!a.value||void 0,class:"glyphs-input",maxlength:m(Qe),type:"text"},null,8,Bo),[[X,n.value,void 0,{trim:!0}]]),d("button",{class:"delete-button is-danger",type:"button",onClick:o}," ← Delete ")]),n.value.length!==m(Qe)||a.value?A("",!0):(_(),S("p",Ro," Glyphs are outside of Eisvana space! ")),d("div",Uo,[(_(),S(q,null,He(16,(e=>d("button",{class:"button glyphs",type:"button",onClick:t=>function(e){n.value.length<Qe&&(n.value+=e)}(i(e-1))},Z(i(e-1)),9,Go))),64))]),$(d("p",Xo,[d("output",Lo,Z(n.value),1)],512),[[rn,n.value]])]))}}),Yo=je(Wo,[["__scopeId","data-v-5032df60"]]);
/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(){return _e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_e.apply(this,arguments)}function qo(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function Ho(e,t){if(null==e)return{};var n,a,o=qo(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var jo="1.15.2";function ye(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var De=ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=ye(/Edge/i),qt=ye(/firefox/i),Xe=ye(/safari/i)&&!ye(/chrome/i)&&!ye(/android/i),dn=ye(/iP(ad|od|hone)/i),cn=ye(/chrome/i)&&ye(/android/i),pn={capture:!1,passive:!1};function I(e,t,n){e.addEventListener(t,n,!De&&pn)}function E(e,t,n){e.removeEventListener(t,n,!De&&pn)}function dt(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Zo(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function de(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&dt(e,t):dt(e,t))||a&&e===n)return e;if(e===n)break}while(e=Zo(e))}return null}var Le,Ht=/\s+/g;function Q(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Ht," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Ht," ")}}function y(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];!(t in a)&&-1===t.indexOf("webkit")&&(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function Ve(e,t){var n="";if("string"==typeof e)n=e;else do{var a=y(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function fn(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,i=a.length;if(n)for(;o<i;o++)n(a[o],o);return a}return[]}function me(){return document.scrollingElement||document.documentElement}function V(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var i,l,r,s,u,d,c;if(e!==window&&e.parentNode&&e!==me()?(l=(i=e.getBoundingClientRect()).top,r=i.left,s=i.bottom,u=i.right,d=i.height,c=i.width):(l=0,r=0,s=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!De))do{if(o&&o.getBoundingClientRect&&("none"!==y(o,"transform")||n&&"static"!==y(o,"position"))){var p=o.getBoundingClientRect();l-=p.top+parseInt(y(o,"border-top-width")),r-=p.left+parseInt(y(o,"border-left-width")),s=l+i.height,u=r+i.width;break}}while(o=o.parentNode);if(a&&e!==window){var h=Ve(o||e),m=h&&h.a,f=h&&h.d;h&&(s=(l/=f)+(d/=f),u=(r/=m)+(c/=m))}return{top:l,left:r,bottom:s,right:u,width:c,height:d}}}function jt(e,t,n){for(var a=ke(e,!0),o=V(e)[t];a;){var i=V(a)[n];if(!("top"===n||"left"===n?o>=i:o<=i))return a;if(a===me())break;a=ke(a,!1)}return!1}function Me(e,t,n,a){for(var o=0,i=0,l=e.children;i<l.length;){if("none"!==l[i].style.display&&l[i]!==b.ghost&&(a||l[i]!==b.dragged)&&de(l[i],n.draggable,e,!1)){if(o===t)return l[i];o++}i++}return null}function Mt(e,t){for(var n=e.lastElementChild;n&&(n===b.ghost||"none"===y(n,"display")||t&&!dt(n,t));)n=n.previousElementSibling;return n||null}function oe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==b.clone&&(!t||dt(e,t))&&n++;return n}function Zt(e){var t=0,n=0,a=me();if(e)do{var o=Ve(e),i=o.a,l=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*l}while(e!==a&&(e=e.parentNode));return[t,n]}function Ko(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}function ke(e,t){if(!e||!e.getBoundingClientRect)return me();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=y(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return me();if(a||t)return n;a=!0}}}while(n=n.parentNode);return me()}function Jo(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function bt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function hn(e,t){return function(){if(!Le){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),Le=setTimeout((function(){Le=void 0}),t)}}}function Qo(){clearTimeout(Le),Le=void 0}function mn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function gn(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function vn(e,t,n){var a={};return Array.from(e.children).forEach((function(o){var i,l,r,s;if(de(o,t.draggable,e,!1)&&!o.animated&&o!==n){var u=V(o);a.left=Math.min(null!==(i=a.left)&&void 0!==i?i:1/0,u.left),a.top=Math.min(null!==(l=a.top)&&void 0!==l?l:1/0,u.top),a.right=Math.max(null!==(r=a.right)&&void 0!==r?r:-1/0,u.right),a.bottom=Math.max(null!==(s=a.bottom)&&void 0!==s?s:-1/0,u.bottom)}})),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var te="Sortable"+(new Date).getTime();function ei(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==y(e,"display")&&e!==b.ghost){t.push({target:e,rect:V(e)});var n=ge({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=Ve(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(Ko(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,l=n.fromRect,r=V(n),s=n.prevFromRect,u=n.prevToRect,d=e.rect,c=Ve(n,!0);c&&(r.top-=c.f,r.left-=c.e),n.toRect=r,n.thisAnimationDuration&&bt(s,r)&&!bt(l,r)&&(d.top-r.top)/(d.left-r.left)==(l.top-r.top)/(l.left-r.left)&&(t=ni(d,s,u,a.options)),bt(r,l)||(n.prevFromRect=l,n.prevToRect=r,t||(t=a.options.animation),a.animate(n,d,r,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){y(e,"transition",""),y(e,"transform","");var o=Ve(this.el),i=o&&o.a,l=o&&o.d,r=(t.left-n.left)/(i||1),s=(t.top-n.top)/(l||1);e.animatingX=!!r,e.animatingY=!!s,y(e,"transform","translate3d("+r+"px,"+s+"px,0)"),this.forRepaintDummy=ti(e),y(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),y(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){y(e,"transition",""),y(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function ti(e){return e.offsetWidth}function ni(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var Pe=[],_t={initializeByDefault:!0},Je={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);Pe.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Pe.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";Pe.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](ge({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](ge({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in Pe.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var i=new a(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,_e(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);typeof i<"u"&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return Pe.forEach((function(a){"function"==typeof a.eventProperties&&_e(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return Pe.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function oi(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,i=e.cloneEl,l=e.toEl,r=e.fromEl,s=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,c=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[te]){var f,v=t.options,g="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||De||Ke?(f=document.createEvent("Event")).initEvent(a,!0,!0):f=new CustomEvent(a,{bubbles:!0,cancelable:!0}),f.to=l||n,f.from=r||n,f.item=o||n,f.clone=i,f.oldIndex=s,f.newIndex=u,f.oldDraggableIndex=d,f.newDraggableIndex=c,f.originalEvent=p,f.pullMode=h?h.lastPutMode:void 0;var b=ge(ge({},m),Je.getEventProperties(a,t));for(var y in b)f[y]=b[y];n&&n.dispatchEvent(f),v[g]&&v[g].call(t,f)}}var ii=["evt"],J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=Ho(n,ii);Je.pluginEvent.bind(b)(e,t,ge({dragEl:h,parentEl:x,ghostEl:w,rootEl:k,nextEl:xe,lastDownEl:at,cloneEl:T,cloneHidden:Ce,dragStarted:Be,putSortable:z,activeSortable:b.active,originalEvent:a,oldIndex:Fe,oldDraggableIndex:We,newIndex:ee,newDraggableIndex:Ee,hideGhostForTarget:wn,unhideGhostForTarget:Dn,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(e){j({sortable:t,name:e,originalEvent:a})}},o))};function j(e){oi(ge({putSortable:z,cloneEl:T,targetEl:h,rootEl:k,oldIndex:Fe,oldDraggableIndex:We,newIndex:ee,newDraggableIndex:Ee},e))}var h,x,w,k,xe,at,T,Ce,Fe,ee,We,Ee,et,z,$e,ue,wt,Dt,Kt,Jt,Be,Ne,Ye,rt,H,Oe=!1,ct=!1,pt=[],ze=!1,tt=!1,St=[],Pt=!1,ft=[],vt=typeof document<"u",nt=dn,Qt=Ke||De?"cssFloat":"float",ai=vt&&!cn&&!dn&&"draggable"in document.createElement("div"),yn=function(){if(vt){if(De)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),bn=function(e,t){var n=y(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Me(e,0,t),i=Me(e,1,t),l=o&&y(o),r=i&&y(i),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+V(o).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+V(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&"none"!==l.float){var d="left"===l.float?"left":"right";return!i||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return o&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=a&&"none"===n[Qt]||i&&"none"===n[Qt]&&s+u>a)?"vertical":"horizontal"},ri=function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,l=n?t.left:t.top,r=n?t.right:t.bottom,s=n?t.width:t.height;return a===l||o===r||a+i/2===l+s/2},li=function(e,t){var n;return pt.some((function(a){var o=a[te].options.emptyInsertThreshold;if(o&&!Mt(a)){var i=V(a),l=e>=i.left-o&&e<=i.right+o,r=t>=i.top-o&&t<=i.bottom+o;if(l&&r)return n=a}})),n},_n=function(e){function t(e,n){return function(a,o,i,l){var r=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||r))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,o,i,l),n)(a,o,i,l);var s=(n?a:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},a=e.group;(!a||"object"!=it(a))&&(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},wn=function(){!yn&&w&&y(w,"display","none")},Dn=function(){!yn&&w&&y(w,"display","")};vt&&!cn&&document.addEventListener("click",(function(e){if(ct)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ct=!1,!1}),!0);var Te=function(e){if(h){e=e.touches?e.touches[0]:e;var t=li(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[te]._onDragOver(n)}}},si=function(e){h&&h.parentNode[te]._isOutsideThisEl(e.target)};function b(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_e({},t),e[te]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return bn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==b.supportPointer&&"PointerEvent"in window&&!Xe,emptyInsertThreshold:5};for(var a in Je.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in _n(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&ai,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?I(e,"pointerdown",this._onTapStart):(I(e,"mousedown",this._onTapStart),I(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(I(e,"dragover",this),I(e,"dragenter",this)),pt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_e(this,ei())}function ui(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ot(e,t,n,a,o,i,l,r){var s,u,d=e[te],c=d.options.onMove;return!window.CustomEvent||De||Ke?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=o||t,s.relatedRect=i||V(t),s.willInsertAfter=r,s.originalEvent=l,e.dispatchEvent(s),c&&(u=c.call(d,s,l)),u}function Et(e){e.draggable=!1}function di(){Pt=!1}function ci(e,t,n){var a=V(Me(n.el,0,n.options,!0)),o=vn(n.el,n.options,w);return t?e.clientX<o.left-10||e.clientY<a.top&&e.clientX<a.right:e.clientY<o.top-10||e.clientY<a.bottom&&e.clientX<a.left}function pi(e,t,n){var a=V(Mt(n.el,n.options.draggable)),o=vn(n.el,n.options,w);return t?e.clientX>o.right+10||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>o.bottom+10||e.clientX>a.right&&e.clientY>a.top}function fi(e,t,n,a,o,i,l,r){var s=a?e.clientY:e.clientX,u=a?n.height:n.width,d=a?n.top:n.left,c=a?n.bottom:n.right,p=!1;if(!l)if(r&&rt<u*o){if(!ze&&(1===Ye?s>d+u*i/2:s<c-u*i/2)&&(ze=!0),ze)p=!0;else if(1===Ye?s<d+rt:s>c-rt)return-Ye}else if(s>d+u*(1-o)/2&&s<c-u*(1-o)/2)return hi(t);return(p=p||l)&&(s<d+u*i/2||s>c-u*i/2)?s>d+u/2?1:-1:0}function hi(e){return oe(h)<oe(e)?1:-1}function mi(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function gi(e){ft.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&ft.push(a)}}function lt(e){return setTimeout(e,0)}function Nt(e){return clearTimeout(e)}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ne=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,u=a.filter;if(gi(n),!h&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||a.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Xe||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=de(r,a.draggable,n,!1))&&r.animated||at===r)){if(Fe=oe(r),We=oe(r,a.draggable),"function"==typeof u){if(u.call(this,e,r,this))return j({sortable:t,rootEl:s,name:"filter",targetEl:r,toEl:n,fromEl:n}),J("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(a){if(a=de(s,a.trim(),n,!1))return j({sortable:t,rootEl:a,name:"filter",targetEl:r,fromEl:n,toEl:n}),J("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!de(s,a.handle,n,!1)||this._prepareDragStart(e,l,r)}}},_prepareDragStart:function(e,t,n){var a,o=this,i=o.el,l=o.options,r=i.ownerDocument;if(n&&!h&&n.parentNode===i){var s=V(n);if(k=i,x=(h=n).parentNode,xe=h.nextSibling,at=n,et=l.group,b.dragged=h,$e={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},Kt=$e.clientX-s.left,Jt=$e.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",a=function(){J("delayEnded",o,{evt:e}),b.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!qt&&o.nativeDraggable&&(h.draggable=!0),o._triggerDragStart(e,t),j({sortable:o,name:"choose",originalEvent:e}),Q(h,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){fn(h,e.trim(),Et)})),I(r,"dragover",Te),I(r,"mousemove",Te),I(r,"touchmove",Te),I(r,"mouseup",o._onDrop),I(r,"touchend",o._onDrop),I(r,"touchcancel",o._onDrop),qt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),J("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(Ke||De))a();else{if(b.eventCanceled)return void this._onDrop();I(r,"mouseup",o._disableDelayedDrag),I(r,"touchend",o._disableDelayedDrag),I(r,"touchcancel",o._disableDelayedDrag),I(r,"mousemove",o._delayedDragTouchMoveHandler),I(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&I(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&Et(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._disableDelayedDrag),E(e,"touchend",this._disableDelayedDrag),E(e,"touchcancel",this._disableDelayedDrag),E(e,"mousemove",this._delayedDragTouchMoveHandler),E(e,"touchmove",this._delayedDragTouchMoveHandler),E(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):I(document,t?"touchmove":"mousemove",this._onTouchMove):(I(h,"dragend",this),I(k,"dragstart",this._onDragStart));try{document.selection?lt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Oe=!1,k&&h){J("dragStarted",this,{evt:t}),this.nativeDraggable&&I(document,"dragover",si);var n=this.options;!e&&Q(h,n.dragClass,!1),Q(h,n.ghostClass,!0),b.active=this,e&&this._appendGhost(),j({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ue){this._lastX=ue.clientX,this._lastY=ue.clientY,wn();for(var e=document.elementFromPoint(ue.clientX,ue.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ue.clientX,ue.clientY))!==t;)t=e;if(h.parentNode[te]._isOutsideThisEl(e),t)do{if(t[te]){if(t[te]._onDragOver({clientX:ue.clientX,clientY:ue.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Dn()}},_onTouchMove:function(e){if($e){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=w&&Ve(w,!0),l=w&&i&&i.a,r=w&&i&&i.d,s=nt&&H&&Zt(H),u=(o.clientX-$e.clientX+a.x)/(l||1)+(s?s[0]-St[0]:0)/(l||1),d=(o.clientY-$e.clientY+a.y)/(r||1)+(s?s[1]-St[1]:0)/(r||1);if(!b.active&&!Oe){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(w){i?(i.e+=u-(wt||0),i.f+=d-(Dt||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var c="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");y(w,"webkitTransform",c),y(w,"mozTransform",c),y(w,"msTransform",c),y(w,"transform",c),wt=u,Dt=d,ue=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:k,t=V(h,!0,nt,!0,e),n=this.options;if(nt){for(H=e;"static"===y(H,"position")&&"none"===y(H,"transform")&&H!==document;)H=H.parentNode;H!==document.body&&H!==document.documentElement?(H===document&&(H=me()),t.top+=H.scrollTop,t.left+=H.scrollLeft):H=me(),St=Zt(H)}Q(w=h.cloneNode(!0),n.ghostClass,!1),Q(w,n.fallbackClass,!0),Q(w,n.dragClass,!0),y(w,"transition",""),y(w,"transform",""),y(w,"box-sizing","border-box"),y(w,"margin",0),y(w,"top",t.top),y(w,"left",t.left),y(w,"width",t.width),y(w,"height",t.height),y(w,"opacity","0.8"),y(w,"position",nt?"absolute":"fixed"),y(w,"zIndex","100000"),y(w,"pointerEvents","none"),b.ghost=w,e.appendChild(w),y(w,"transform-origin",Kt/parseInt(w.style.width)*100+"% "+Jt/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;J("dragStart",this,{evt:e}),b.eventCanceled?this._onDrop():(J("setupClone",this),b.eventCanceled||((T=gn(h)).removeAttribute("id"),T.draggable=!1,T.style["will-change"]="",this._hideClone(),Q(T,this.options.chosenClass,!1),b.clone=T),n.cloneId=lt((function(){J("clone",n),!b.eventCanceled&&(n.options.removeCloneOnHide||k.insertBefore(T,h),n._hideClone(),j({sortable:n,name:"clone"}))})),!t&&Q(h,o.dragClass,!0),t?(ct=!0,n._loopId=setInterval(n._emulateDragOver,50)):(E(document,"mouseup",n._onDrop),E(document,"touchend",n._onDrop),E(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,h)),I(document,"drop",n),y(h,"transform","translateZ(0)")),Oe=!0,n._dragStartId=lt(n._dragStarted.bind(n,t,e)),I(document,"selectstart",n),Be=!0,Xe&&y(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,o,i=this.el,l=e.target,r=this.options,s=r.group,u=b.active,d=et===s,c=r.sort,p=z||u,m=this,f=!1;if(!Pt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=de(l,r.draggable,i,!0),X("dragOver"),b.eventCanceled)return f;if(h.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return F(!1);if(ct=!1,u&&!r.disabled&&(d?c||(a=x!==k):z===this||(this.lastPutMode=et.checkPull(this,u,h,e))&&s.checkPut(this,u,h,e))){if(o="vertical"===this._getDirection(e,l),t=V(h),X("dragOverValid"),b.eventCanceled)return f;if(a)return x=k,$(),this._hideClone(),X("revert"),b.eventCanceled||(xe?k.insertBefore(h,xe):k.appendChild(h)),F(!0);var v=Mt(i,r.draggable);if(!v||pi(e,o,this)&&!v.animated){if(v===h)return F(!1);if(v&&i===e.target&&(l=v),l&&(n=V(l)),!1!==ot(k,i,h,t,l,n,e,!!l))return $(),v&&v.nextSibling?i.insertBefore(h,v.nextSibling):i.appendChild(h),x=i,B(),F(!0)}else if(v&&ci(e,o,this)){var g=Me(i,0,r,!0);if(g===h)return F(!1);if(n=V(l=g),!1!==ot(k,i,h,t,l,n,e,!1))return $(),i.insertBefore(h,g),x=i,B(),F(!0)}else if(l.parentNode===i){n=V(l);var S,_,E,I=h.parentNode!==i,D=!ri(h.animated&&h.toRect||t,l.animated&&l.toRect||n,o),T=o?"top":"left",C=jt(l,"top","top")||jt(h,"top","top"),O=C?C.scrollTop:void 0;if(Ne!==l&&(_=n[T],ze=!1,tt=!D&&r.invertSwap||I),0!==(S=fi(e,l,n,o,D?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,tt,Ne===l))){var A=oe(h);do{A-=S,E=x.children[A]}while(E&&("none"===y(E,"display")||E===w))}if(0===S||E===l)return F(!1);Ne=l,Ye=S;var N=l.nextElementSibling,P=!1,M=ot(k,i,h,t,l,n,e,P=1===S);if(!1!==M)return(1===M||-1===M)&&(P=1===M),Pt=!0,setTimeout(di,30),$(),P&&!N?i.appendChild(h):l.parentNode.insertBefore(h,P?N:l),C&&mn(C,0,O-C.scrollTop),x=h.parentNode,void 0!==_&&!tt&&(rt=Math.abs(_-V(l)[T])),B(),F(!0)}if(i.contains(h))return F(!1)}return!1}function X(r,s){J(r,m,ge({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:c,fromSortable:p,target:l,completed:F,onMove:function(n,a){return ot(k,i,h,t,n,V(n),e,a)},changed:B},s))}function $(){X("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function F(t){return X("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(m),m!==p&&(Q(h,z?z.options.ghostClass:u.options.ghostClass,!1),Q(h,r.ghostClass,!0)),z!==m&&m!==b.active?z=m:m===b.active&&z&&(z=null),p===m&&(m._ignoreWhileAnimating=l),m.animateAll((function(){X("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===h&&!h.animated||l===i&&!l.animated)&&(Ne=null),!r.dragoverBubble&&!e.rootEl&&l!==document&&(h.parentNode[te]._isOutsideThisEl(e.target),!t&&Te(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function B(){ee=oe(h),Ee=oe(h,r.draggable),j({sortable:m,name:"change",toEl:i,newIndex:ee,newDraggableIndex:Ee,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",Te),E(document,"mousemove",Te),E(document,"touchmove",Te)},_offUpEvents:function(){var e=this.el.ownerDocument;E(e,"mouseup",this._onDrop),E(e,"touchend",this._onDrop),E(e,"pointerup",this._onDrop),E(e,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ee=oe(h),Ee=oe(h,n.draggable),J("drop",this,{evt:e}),x=h&&h.parentNode,ee=oe(h),Ee=oe(h,n.draggable),b.eventCanceled||(Oe=!1,tt=!1,ze=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nt(this.cloneId),Nt(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xe&&y(document.body,"user-select",""),y(h,"transform",""),e&&(Be&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(k===x||z&&"clone"!==z.lastPutMode)&&T&&T.parentNode&&T.parentNode.removeChild(T),h&&(this.nativeDraggable&&E(h,"dragend",this),Et(h),h.style["will-change"]="",Be&&!Oe&&Q(h,z?z.options.ghostClass:this.options.ghostClass,!1),Q(h,this.options.chosenClass,!1),j({sortable:this,name:"unchoose",toEl:x,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==x?(ee>=0&&(j({rootEl:x,name:"add",toEl:x,fromEl:k,originalEvent:e}),j({sortable:this,name:"remove",toEl:x,originalEvent:e}),j({rootEl:x,name:"sort",toEl:x,fromEl:k,originalEvent:e}),j({sortable:this,name:"sort",toEl:x,originalEvent:e})),z&&z.save()):ee!==Fe&&ee>=0&&(j({sortable:this,name:"update",toEl:x,originalEvent:e}),j({sortable:this,name:"sort",toEl:x,originalEvent:e})),b.active&&((null==ee||-1===ee)&&(ee=Fe,Ee=We),j({sortable:this,name:"end",toEl:x,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),k=h=x=w=xe=T=at=Ce=$e=ue=Be=ee=Ee=Fe=We=Ne=Ye=z=et=b.dragged=b.ghost=b.clone=b.active=null,ft.forEach((function(e){e.checked=!0})),ft.length=wt=Dt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),ui(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,i=this.options;a<o;a++)de(e=n[a],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||mi(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];de(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return de(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=Je.modifyOption(this,e,t);n[e]=typeof a<"u"?a:t,"group"===e&&_n(n)},destroy:function(){J("destroy",this);var e=this.el;e[te]=null,E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart),E(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),pt.splice(pt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(J("hideClone",this),b.eventCanceled)return;y(T,"display","none"),this.options.removeCloneOnHide&&T.parentNode&&T.parentNode.removeChild(T),Ce=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ce){if(J("showClone",this),b.eventCanceled)return;h.parentNode!=k||this.options.group.revertClone?xe?k.insertBefore(T,xe):k.appendChild(T):k.insertBefore(T,h),this.options.group.revertClone&&this.animate(h,T),y(T,"display",""),Ce=!1}}else this._hideClone()}},vt&&I(document,"touchmove",(function(e){(b.active||Oe)&&e.cancelable&&e.preventDefault()})),b.utils={on:I,off:E,css:y,find:fn,is:function(e,t){return!!de(e,t,e,!1)},extend:Jo,throttle:hn,closest:de,toggleClass:Q,clone:gn,index:oe,nextTick:lt,cancelNextTick:Nt,detectDirection:bn,getChild:Me},b.get=function(e){return e[te]},b.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(b.utils=ge(ge({},b.utils),e.utils)),Je.mount(e)}))},b.create=function(e,t){return new b(e,t)},b.version=jo;var Re,At,It,Ct,ht,Ue,F=[],Ot=!1;function vi(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):t.touches?I(document,"touchmove",this._handleFallbackAutoScroll):I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),en(),st(),Qo()},nulling:function(){ht=At=Re=Ot=Ue=It=Ct=null,F.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(a,o);if(ht=e,t||this.options.forceAutoScrollFallback||Ke||De||Xe){kt(e,this.options,i,t);var l=ke(i,!0);Ot&&(!Ue||a!==It||o!==Ct)&&(Ue&&en(),Ue=setInterval((function(){var i=ke(document.elementFromPoint(a,o),!0);i!==l&&(l=i,st()),kt(e,n.options,i,t)}),10),It=a,Ct=o)}else{if(!this.options.bubbleScroll||ke(i,!0)===me())return void st();kt(e,this.options,ke(i,!1),!1)}}},_e(e,{pluginName:"scroll",initializeByDefault:!0})}function st(){F.forEach((function(e){clearInterval(e.pid)})),F=[]}function en(){clearInterval(Ue)}var kt=hn((function(e,t,n,a){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,u=me(),d=!1;At!==n&&(At=n,st(),Re=t.scroll,o=t.scrollFn,!0===Re&&(Re=ke(n,!0)));var c=0,p=Re;do{var h=p,m=V(h),f=m.top,v=m.bottom,g=m.left,w=m.right,S=m.width,_=m.height,E=void 0,I=void 0,D=h.scrollWidth,x=h.scrollHeight,k=y(h),T=h.scrollLeft,C=h.scrollTop;h===u?(E=S<D&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),I=_<x&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(E=S<D&&("auto"===k.overflowX||"scroll"===k.overflowX),I=_<x&&("auto"===k.overflowY||"scroll"===k.overflowY));var O=E&&(Math.abs(w-i)<=r&&T+S<D)-(Math.abs(g-i)<=r&&!!T),A=I&&(Math.abs(v-l)<=r&&C+_<x)-(Math.abs(f-l)<=r&&!!C);if(!F[c])for(var N=0;N<=c;N++)F[N]||(F[N]={});(F[c].vx!=O||F[c].vy!=A||F[c].el!==h)&&(F[c].el=h,F[c].vx=O,F[c].vy=A,clearInterval(F[c].pid),(0!=O||0!=A)&&(d=!0,F[c].pid=setInterval(function(){a&&0===this.layer&&b.active._onTouchMove(ht);var t=F[this.layer].vy?F[this.layer].vy*s:0,n=F[this.layer].vx?F[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(b.dragged.parentNode[te],n,t,e,ht,F[this.layer].el)||mn(F[this.layer].el,n,t)}.bind({layer:c}),24))),c++}while(t.bubbleScroll&&p!==u&&(p=ke(p,!1)));Ot=d}}),30),Sn=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var s=n||o;l();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(u.clientX,u.clientY);r(),s&&!s.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Bt(){}function Rt(){}Bt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Me(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Sn},_e(Bt,{pluginName:"revertOnSpill"}),Rt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Sn},_e(Rt,{pluginName:"removeOnSpill"}),b.mount(new vi),b.mount(Rt,Bt);const yi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2016.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='936.091px'%20height='936.091px'%20viewBox='0%200%20936.091%20936.091'%20style='enable-background:new%200%200%20936.091%20936.091'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M562.292,715.212l-41.747,42.25V178.628l41.747,42.25c20.379,20.625,53.62,20.825,74.245,0.445%20c20.625-20.379,20.824-53.619,0.445-74.244L507.071,15.601c-20.379-20.626-53.62-20.825-74.245-0.445L299.554,146.837%20c-20.625,20.379-20.824,53.619-0.445,74.244c10.271,10.395,23.806,15.601,37.348,15.601c13.33,0,26.667-5.046,36.897-15.155%20l42.192-41.688v576.414l-42.192-41.688c-20.625-20.381-53.865-20.182-74.245,0.445c-20.379,20.625-20.18,53.865,0.445,74.244%20l133.272,131.682c9.83,9.713,23.089,15.154,36.898,15.154c0.104,0,0.211,0,0.315,0c13.923-0.084,27.244-5.695,37.03-15.602%20l129.911-131.479c20.38-20.625,20.181-53.865-0.444-74.244C615.912,694.386,582.67,694.585,562.292,715.212z'/%3e%3c/g%3e%3c/svg%3e",yt=e=>(mt("data-v-abc6309e"),e=e(),gt(),e),bi={class:"gallery-item"},_i=["href"],wi=["src","alt"],Di={class:"gallery-meta"},Si={class:"filename-wrapper"},Ei=yt((()=>d("span",{class:"text-bold"},"Name: ",-1))),Ii={class:"control-buttons"},Ci=yt((()=>d("img",{class:"handle",src:yi,title:"Move picture up or down",alt:"Move via drag'n'drop"},null,-1))),ki=yt((()=>d("svg",{width:"36",height:"36"},[d("path",{d:"M2 25h32L18 9 2 25Z"})],-1))),$i=[ki],Ti=yt((()=>d("svg",{width:"36",height:"36"},[d("path",{d:"M2 11h32L18 27 2 11Z"})],-1))),xi=[Ti],Pi=ie({__name:"GalleryItem",props:{fileItem:{}},setup(e){const t=pe(),{imageData:n}=we(t),{gallery:a}=be(n.value);function o(e,t){const n=a.value.indexOf(e);if(-1===n)throw new Error("Couldn't find item!");if("up"===t&&n)a.value.splice(n-1,0,e),a.value.splice(n+1,1);else if("down"===t&&n!==a.value.length-1){const t=a.value.filter((t=>t!==e));t.splice(n+1,0,e),a.value=t}}return(e,t)=>(_(),S("article",bi,[d("a",{href:e.fileItem.url,class:"gallery-media",target:"_blank",rel:"noopener noreferrer"},[d("img",{src:e.fileItem.url,alt:e.fileItem.file?.name??e.fileItem.desc},null,8,wi)],8,_i),d("div",Di,[d("p",Si,[Ei,qe(Z(e.fileItem.file?.name??e.fileItem.filename),1)]),d("div",null,[$(d("input",{type:"text",placeholder:"Description","onUpdate:modelValue":t[0]||(t[0]=t=>e.fileItem.desc=t)},null,512),[[X,e.fileItem.desc,void 0,{trim:!0}]])])]),d("div",Ii,[d("button",{class:"delete-icon is-clickable",title:"Remove picture from gallery",onClick:t[1]||(t[1]=t=>function(e){URL.revokeObjectURL(e.url),a.value=a.value.filter((t=>t!==e))}(e.fileItem))}," ❌ "),Ci,d("button",{class:"button move-button",title:"Move up","data-move":"up",onClick:t[2]||(t[2]=t=>o(e.fileItem,"up"))},$i),d("button",{class:"button move-button",title:"Move down","data-move":"down",onClick:t[3]||(t[3]=t=>o(e.fileItem,"down"))},xi)])]))}}),Ni=je(Pi,[["__scopeId","data-v-abc6309e"]]),Ai=["for"],Oi={class:"title-wrapper"},Fi={class:"drop-title text-bold"},Vi=["id","multiple"],Mi={key:0},En=ie({__name:"GenericFileUpload",props:{infoboxImageInGallery:{type:Boolean},multiple:{type:Boolean},backgroundImageUrl:{},id:{},caption:{}},emits:["upload"],setup(e,{emit:t}){const n=t,a=ce(!1),o=pe(),{imageData:i}=we(o),{image:l}=be(i.value);function r(e){const{target:t}=e;!(t instanceof HTMLInputElement)||!t.files||n("upload",t.files)}function s(e){a.value=!1;const t=e.dataTransfer?.files;t?.length&&n("upload",t)}return(e,t)=>(_(),S(q,null,[d("label",{class:Vt([{"drag-active":a.value},"drop-container"]),for:e.id,style:An(e.backgroundImageUrl?`background-image:url(${e.backgroundImageUrl})`:void 0),onDragenter:t[0]||(t[0]=e=>a.value=!0),onDragleave:t[1]||(t[1]=e=>a.value=!1),onDrop:xt(s,["prevent"]),onDragover:t[2]||(t[2]=xt((()=>{}),["prevent"]))},[d("span",Oi,[d("span",Fi,Z(e.caption),1)]),d("input",{id:e.id,multiple:e.multiple,accept:"image/*",type:"file",onChange:r},null,40,Vi)],46,Ai),e.infoboxImageInGallery?(_(),S("div",Mi,Z(m(l).file?.name)+" is already in the infobox and therefore wasn't added to the gallery. ",1)):A("",!0)],64))}}),Bi=ie({__name:"FileUpload",setup(e){const t=ce(!1),n=pe(),{imageData:a}=we(n),{gallery:o,image:i}=be(a.value);function l(e){const n=Array.from(e);t.value=n.map((e=>e.name)).includes(i.value.file?.name??"");!function(e){for(const t of e)o.value.unshift({id:r++,desc:"",url:URL.createObjectURL(t),filename:t.name,file:t})}(t.value?n.filter((e=>e.name!==i.value.file?.name)):n)}let r=0;return(e,n)=>(_(),Ze(En,{"infobox-image-in-gallery":t.value,caption:"Drop gallery files here",id:"galleryImageInput",multiple:"",onUpload:l},null,8,["infobox-image-in-gallery"]))}}),Ri=e=>(mt("data-v-9a92eab3"),e=e(),gt(),e),Ui={key:0,class:"gallery-preview-header"},Gi=Ri((()=>d("p",{class:"preview-caption has-text-weight-bold"},"Gallery Preview",-1))),Xi=ie({__name:"Gallery",setup(e){const t=ce(null),n=ce(!1);ln((()=>{t.value&&new b(t.value,{handle:".handle",animation:250,onUpdate:l})}));const a=pe(),{imageData:o}=we(a),{gallery:i}=be(o.value);function l(e){const t=e.oldIndex,n=e.newIndex;if("number"!=typeof t||"number"!=typeof n)return;const a=i.value.splice(t,1);i.value.splice(n,0,a[0])}const r=()=>n.value=!n.value;return(e,a)=>(_(),S(q,null,[Ie(Bi),m(i).length?(_(),S("div",Ui,[Gi,d("button",{class:"show-hide-button",type:"button",onClick:r},Z(n.value?"Show":"Hide"),1)])):A("",!0),$(d("div",{ref_key:"filePreview",ref:t,class:"gallery-preview"},[(_(!0),S(q,null,He(m(i),(e=>(_(),Ze(Ni,{key:e.id,"file-item":e},null,8,["file-item"])))),128))],512),[[rn,m(i).length&&!n.value]])],64))}}),Li=je(Xi,[["__scopeId","data-v-9a92eab3"]]),Wi=ie({__name:"ImageInput",setup(e){const t=pe(),{imageData:n}=we(t),{image:a}=be(n.value);function o(e){!function(e){URL.revokeObjectURL(a.value.url),a.value.file=e,a.value.filename=e.name,a.value.url=URL.createObjectURL(e)}(e[0])}return(e,t)=>(_(),Ze(En,{"background-image-url":m(a).url,caption:"Drop main image here",id:"mainImageInput",onUpload:o},null,8,["background-image-url"]))}}),L=e=>(mt("data-v-a3d95d3b"),e=e(),gt(),e),Yi=L((()=>d("p",{class:"question required"},"What is the name of your base?",-1))),zi=L((()=>d("p",{class:"question required"},"What is the name of the system where your base is?",-1))),qi=L((()=>d("p",{class:"subtitle"},"The name of the system can be seen by looking at the galaxy map in space.",-1))),Hi=L((()=>d("p",{class:"question required"}," What is the name of the planet on which your base is or that is orbited by the moon on which your base is? ",-1))),ji=L((()=>d("p",{class:"question"},"If your base is on a moon (else leave empty): What is the name of the moon?",-1))),Zi=L((()=>d("p",{class:"question required"},"What are the planetary coordinates of your base?",-1))),Ki=L((()=>d("p",{class:"subtitle"},"You can find the coordinates when you look through your visor. Example: -14.24, +121.12",-1))),Ji=["aria-invalid"],Qi={key:0,class:"error"},ea=L((()=>d("p",{class:"question required"},"What are the glyphs?",-1))),ta=L((()=>d("p",{class:"subtitle"},"Glyphs can be found in photo mode",-1))),na=L((()=>d("p",{class:"question"},"Base Features: Check all that apply:",-1))),oa={class:"checkboxes"},ia=["onUpdate:modelValue"],aa=L((()=>d("p",{class:"question required"},"On which platform was the base built?",-1))),ra=L((()=>d("p",{class:"question required"},"On which Game Mode was the base built?",-1))),la=L((()=>d("p",{class:"question"},"What type of base is it? What is its purpose?",-1))),sa=L((()=>d("p",{class:"subtitle"},"Some examples are Artistic, Embassy, Farm, Industrial, Memorial and Residential.",-1))),ua={class:"async-section-title-wrapper"},da={key:0,class:"subtitle"},ca=["onUpdate:modelValue"],pa=L((()=>d("p",{class:"question required"},"Main picture",-1))),fa=L((()=>d("p",{class:"subtitle"},"Picture clearly showing the entire base",-1))),ha=L((()=>d("p",{class:"question"},"Gallery",-1))),ma=L((()=>d("p",{class:"subtitle"},"Other pictures",-1))),ga=ie({__name:"BaseData",setup(e){const t=pe(),{baseData:n,isAxesValid:a,sectionData:o}=we(t),{landingpad:i,terminal:l,geobay:r,farm:s,racetrack:u,arena:c}=be(n.value),p=sn([{label:"Landing Pad",value:i},{label:"Trade Terminal",value:l},{label:"Geobay",value:r},{label:"Farm",value:s},{label:"Racetrack",value:u},{label:"Arena",value:c}]);return(e,t)=>(_(),S(q,null,[d("article",null,[Yi,$(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).baseName=e),type:"text"},null,512),[[X,m(n).baseName,void 0,{trim:!0}]])]),m(ut)?A("",!0):(_(),S(q,{key:0},[d("article",null,[zi,qi,$(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).system=e),type:"text"},null,512),[[X,m(n).system,void 0,{trim:!0}]])]),d("article",null,[Hi,$(d("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>m(n).planet=e),type:"text"},null,512),[[X,m(n).planet,void 0,{trim:!0}]])]),d("article",null,[ji,$(d("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>m(n).moon=e),type:"text"},null,512),[[X,m(n).moon,void 0,{trim:!0}]])]),d("article",null,[Zi,Ki,$(d("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>m(n).axes=e),"aria-invalid":!m(a)||void 0,type:"text"},null,8,Ji),[[X,m(n).axes,void 0,{trim:!0,lazy:!0}]]),m(a)?A("",!0):(_(),S("p",Qi," Please give the coordinates like in the example above, including + and - "))]),d("article",null,[ea,ta,Ie(Yo,{modelValue:m(n).glyphs,"onUpdate:modelValue":t[5]||(t[5]=e=>m(n).glyphs=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])],64)),d("article",null,[na,d("div",oa,[(_(!0),S(q,null,He(p,(e=>(_(),S("label",null,[$(d("input",{"onUpdate:modelValue":t=>e.value=t,type:"checkbox"},null,8,ia),[[on,e.value,void 0,{trim:!0}]]),d("span",null,Z(e.label),1)])))),256))])]),m(ut)?A("",!0):(_(),S(q,{key:1},[d("article",null,[aa,Ie(Yt,{modelValue:m(n).platform,"onUpdate:modelValue":t[6]||(t[6]=e=>m(n).platform=e),modelModifiers:{trim:!0},items:m(On),name:"platform"},null,8,["modelValue","items"])]),d("article",null,[ra,Ie(Yt,{modelValue:m(n).mode,"onUpdate:modelValue":t[7]||(t[7]=e=>m(n).mode=e),modelModifiers:{trim:!0},items:m(Fn),name:"mode"},null,8,["modelValue","items"])])],64)),d("article",null,[la,sa,$(d("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>m(n).type=e),type:"text"},null,512),[[X,m(n).type,void 0,{trim:!0}]])]),(_(!0),S(q,null,He(m(o),(e=>(_(),S("article",{key:e.heading},[d("div",ua,[d("p",{class:Vt([{required:e.required},"question"])},Z(e.heading),3),e.loading?(_(),Ze(Vn,{key:0})):A("",!0)]),e.explanation?(_(),S("p",da,Z(e.explanation),1)):A("",!0),$(d("textarea",{"onUpdate:modelValue":t=>e.body=t},null,8,ca),[[X,e.body,void 0,{trim:!0}]])])))),128)),d("article",null,[pa,fa,Ie(Wi)]),d("article",null,[ha,ma,Ie(Li)])],64))}}),va=je(ga,[["__scopeId","data-v-a3d95d3b"]]),ya=ie({__name:"BaseForm",props:{page:{}},setup(e){const t=e,n={1:Eo,2:va},a=O((()=>n[t.page]));return(e,t)=>(_(),Ze(m(a)))}});function ba(e){return e.map(((e,t)=>e.body||Mn.includes(e.heading.toLowerCase())?`${t?`==${e.heading}==`:""}\n${e.body}`.trim():"")).filter(Boolean).join("\n\n").replace(/\n{3,}/g,"\n\n").replace(/ {2,}/g," ")}function _a({version:e,name:t,image:n,builderlink:a,builder:o,region:i,system:l,planet:r,moon:s,axes:u,glyphs:d,type:c,mode:p,platform:h,farm:m,geobay:f,landingpad:v,arena:g,terminal:b,racetrack:y,censusPlayer:w,censusReddit:S,censusSocial:_,censusDiscord:E,censusFriend:I,arrival:D,renew:x}){return{heading:"",body:`{{Version|${e}}}\n{{Eisvana}}\n{{Base infobox\n| name = ${t}\n| image = ${n}\n| civilized = ${Bn}\n| researchteam =\n| builderlink = ${a}\n| builder = ${o}\n| galaxy = Eissentam\n| region = ${i}\n| system = ${l}\n| planet = ${r}\n| moon = ${s}\n| axes = ${u}\n| coordinates = {{Glyphs2Coords|${d}}}\n| portalglyphs = ${d}\n| type = ${c}\n| mode = ${p}\n| platform = ${h}\n| release = ${e}\n| farm = ${m}\n| geobay = ${f}\n| landingpad = ${v}\n| arena = ${g}\n| terminal = ${b}\n| racetrack = ${y}\n| censusplayer = ${w}\n| ${S?"censusreddit = "+S:"censussocial = "+_}\n| censusdiscord = ${E}\n| censusfriend = ${I}\n| censusarrival = ${D}\n| censusrenewal = ${x}\n| censusshow = Y\n}}\n'''${t}''' is a player base.`}}function wa({name:e,system:t,planet:n,moon:a}){return{heading:"Summary",body:`'''${e}''' is a [[Habitable Base|player base]], located on the ${a?"moon [["+a+"]] of the ":""}planet [[${n}]] in the [[${t}]] system.`}}function Da({galleryPics:e}){return{heading:"Gallery",body:`<gallery>${e?"\n"+e:""}\n</gallery>`}}function Sa(e){const t=_a(e),n=wa(e),a=Da(e),{sections:o}=e;return ba([t,n,...o,a])}const Ea="Orbital",In={WEBP:"image/webp",JPEG:"image/jpeg"},Cn="b25tZXNzYWdlID0gYXN5bmMgKHsgZGF0YTogdCB9KSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IHMgPSB7CiAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICBkYXRhOiBhd2FpdCBjKHQpCiAgICB9OwogICAgcG9zdE1lc3NhZ2Uocyk7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc3QgciA9IHsKICAgICAgc3RhdHVzOiAiZXJyb3IiLAogICAgICBkYXRhOiBgQ291bGQgbm90IGNvbXByZXNzISAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICIifWAKICAgIH07CiAgICBwb3N0TWVzc2FnZShyKTsKICB9IGZpbmFsbHkgewogICAgY2xvc2UoKTsKICB9Cn07CmFzeW5jIGZ1bmN0aW9uIGMoeyBmaWxlOiB0LCBjb25maWc6IGUgfSkgewogIGNvbnN0IHMgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0KSwgeyB3aWR0aDogciwgaGVpZ2h0OiBuIH0gPSBzLCBvID0gbmV3IE9mZnNjcmVlbkNhbnZhcyhyLCBuKSwgYSA9IG8uZ2V0Q29udGV4dCgiYml0bWFwcmVuZGVyZXIiKTsKICByZXR1cm4gYSA9PSBudWxsIHx8IGEudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAocyksIGF3YWl0IG8uY29udmVydFRvQmxvYihlKTsKfQo=",Ia=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),tn=typeof window<"u"&&window.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",Ia(Cn)],{type:"text/javascript;charset=utf-8"});function Ca(e){let t;try{if(t=tn&&(window.URL||window.webkitURL).createObjectURL(tn),!t)throw"";const n=new Worker(t,{type:"module",name:e?.name});return n.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch{return new Worker("data:text/javascript;base64,"+Cn,{type:"module",name:e?.name})}}async function ka(e){return new Promise(((t,n)=>{const a=new Ca;a.postMessage(e),a.onmessage=({data:e})=>{if("error"===e.status)console.error(e.data),n(e.data);else{const n=e.data;t(n)}}}))}async function $a(e,t={}){t.type??(t.type=In.JPEG),t.quality??(t.quality=.92);const n={originalType:e.type,...t};return await ka({file:e,config:n})}async function Ft(e,t=1){if(e.size<Xt)return e;const n=In.JPEG,a=n.split("/").at(-1),o=await $a(e,{quality:t,type:n}),i=t-.01;if(o.size>Xt)return await Ft(e,i);const l=`${e.name.split(".").slice(0,-1).join(".")}-min.${a}`;return new File([o],l,{type:n})}const kn=e=>e.replaceAll(/['"[\]{} ]/g,"_"),Ae=e=>e?"Yes":"No";function Ta(e,t){if(!e.file)return;const n=kn(t),a=(e.file?.name??e.filename).split(".").at(-1),o=`${n}${e.id}.${a}`;return new File([e.file],o,{type:e.file.type})}async function xa(e){const t=pe(),{baseData:n,playerData:a,imageData:o,region:i,sectionData:l}=t,{image:r,gallery:s}=o,{mode:u,platform:d}=n,{renewals:c}=a;c.includes(Lt)||c.push(Lt);const p=[];for(const e of s){const t=Ta(e,n.baseName);if(!t)continue;const a=await Ft(t);e.file=a,e.filename=a.name,p.push(a)}const h=s.map((({desc:e,file:t,filename:n})=>e?`${t?.name??n}|${e}`:t?.name??n)).join("\n"),m=a.wikiName?"":a.player,f=`{{profile|${a.wikiName}}}`,v=a.social.split("/").at(-1),g=`[${a.social} ${v}]`,b=a.social?g:f,y=a.reddit?"":b,w=a.social||a.wikiName?y:"",S=r.file?.type,_=(r.file?.name??r.filename).split(".").at(-1),E=`${kn(n.baseName)}-main.${_}`,I=r.file?new File([r.file],E,{type:S}):void 0,D=I?await Ft(I):void 0,x=Sa({version:Ea,region:i,name:n.baseName,image:D?.name??r.filename,platform:d??"PC",mode:u??"Normal",builderlink:a.wikiName,builder:m,system:n.system,planet:n.planet,moon:n.moon,axes:n.axes,glyphs:n.glyphs,type:n.type,farm:Ae(n.farm),arena:Ae(n.arena),racetrack:Ae(n.racetrack),geobay:Ae(n.geobay),terminal:Ae(n.terminal),landingpad:Ae(n.landingpad),censusPlayer:a.player,censusDiscord:a.discord,censusReddit:a.reddit,censusSocial:w,censusFriend:a.friend,arrival:a.arrival,renew:c.join(", "),galleryPics:h,sections:l}),k=new File([x],`${n.baseName}.txt`,{type:"text/plain"}),T=Rn(p);T.unshift([k]),D&&T[0].unshift(D);const C=T.map(Pa),O={allowed_mentions:{parse:[]},embeds:[{description:e,title:"New Census Submission!",image:{url:`attachment://${D?.name??r.filename}`},fields:[{name:"Player",value:a.player},{name:"Wikipage",value:un(n.baseName).toString()},{name:"Timezone",value:a.shareTimezone?$t:"not disclosed"},{name:"Active Time",value:a.activeTime||"not disclosed"}]}],attachments:[{id:0,filename:D?.name??r.filename}]};D||(delete O.embeds[0].image,delete O.attachments),Ge||(O.embeds[0].fields=O.embeds[0].fields.slice(0,-2)),C[0].append("payload_json",JSON.stringify(O));const A=C.map(Na);await Promise.all(A)}function Pa(e){const t=new FormData;return e.forEach(((e,n)=>t.append(`files[${n}]`,e))),t}async function Na(e){await fetch(Ln,{method:"POST",body:e})}function Aa(){const e=pe(),{validation:t,playerData:n,baseData:a,region:o,isDiscordValid:i,isRedditValid:l,isSocialValid:r,isNameValid:s,isFriendValid:u,isAxesValid:d,isImageDataValid:c,sectionData:p}=we(e),{wikiUserExists:h}=be(t.value),m=sn({discord:i,reddit:l,social:r,name:s,friend:u,wikiName:h}),{isDataValid:f,missingProps:v}=nn(n),{isDataValid:g,missingProps:b}=nn(a),{isDataValid:y,missingProps:w}=Oa(m),S=O((()=>[...v.value,...w.value])),_=O((()=>f.value&&y.value)),E=O((()=>p.value.filter((e=>e.required&&!e.body)).map((e=>e.heading)))),I=O((()=>!E.value.length)),D=O((()=>g.value&&I.value&&c.value&&o.value&&d.value)),x=O((()=>[...b.value,...E.value,...c.value?[]:["image"],...o.value?[]:["region"],...d.value?[]:["axes"]]));return{isAllDataValid:O((()=>_.value&&D.value)),allMissingProps:O((()=>[...S.value,...x.value])),isPageTwoDataValid:D,missingPageTwoProps:x,isPageOneValid:_,missingPageOneProps:S}}function Oa(e){const t=O((()=>Object.entries(e))),n=O((()=>t.value.filter((e=>!e[1])))),a=O((()=>n.value.map((e=>e[0]))));return{isDataValid:O((()=>!a.value.length)),missingProps:a}}function nn(e){const t=O((()=>Object.entries(e.value))),n=O((()=>t.value.filter((e=>Un(e[0])&&!Gn.includes(e[0]))))),a=O((()=>n.value.filter((e=>!e[1]&&"boolean"!=typeof e[1])))),o=O((()=>a.value.map((e=>e[0]))));return{isDataValid:O((()=>!a.value.length)),missingProps:o}}const Fa=d("h1",{class:"title"},"Eisvana Census Form",-1),Va=["href","aria-disabled"],Ma={key:0},Ba=d("a",{class:"secondary",href:"#",role:"button"},"Back",-1),Ra=["aria-busy","disabled"],Ua={key:0},Ga={key:1},Xa=d("header",null,[d("p",{class:"text-bold thank-you"},"Thank you for registering!")],-1),La=d("p",null,[qe(" We're excited to have you join us in Eisvana!"),d("br"),qe("We'll let you know when your submission has been processed. ")],-1),Wa=d("p",null,"You can now close this window.",-1),Ya=[Xa,La,Wa],za={key:2},qa=d("header",null,[d("p",{class:"text-bold thank-you"},"Thank you for updating your census entry!")],-1),Ha=d("p",null,"We'll let you know when your submission has been processed.",-1),ja=d("p",null,"You can now close this window.",-1),Za=[qa,Ha,ja],er=ie({__name:"CensusForm",setup(e){const{isAllDataValid:t,allMissingProps:n,isPageOneValid:a,missingPageOneProps:o}=Aa(),i=ce(window.location.hash),l=pe();i.value&&!a.value&&(window.location.hash=""),addEventListener("hashchange",(()=>i.value=window.location.hash));const r=O((()=>"#2"===i.value&&a.value?2:1)),s=ce(!1),u=ce(!1),c=ce(!1),p=ce(!1),h=Ge?"censusForm":Wt?"newBase":"updateBase";async function f(){u.value=!0;const e=sessionStorage.getItem("update"),t=JSON.parse(e??"{}").Name??"",n=Wt?`New Page for existing citizen. Old page: ${un(t)}`:"Updated Base Page",a=Ge?"New Citizen":n;try{await xa(a),l.resetStore(),localStorage.removeItem("censusForm"),localStorage.removeItem("updateBase"),localStorage.removeItem("newBase"),localStorage.removeItem("lastUpdated"),sessionStorage.removeItem("update"),p.value=!0}catch(e){c.value=!0,console.error("Something went wrong:",e)}finally{u.value=!1,setTimeout((()=>{c.value=!1}),Wn)}}function v(){a.value&&scrollTo(0,0)}ln((async()=>{ut&&(await l.fetchBaseWikiData(),l.$subscribe((()=>s.value||=!0)))}));const g=O((()=>u.value?"":c.value?"Failed!":"Submit"));return l.$subscribe(((e,t)=>{localStorage.setItem(h,JSON.stringify(t,Xn)),localStorage.setItem("lastUpdated",Date.now().toString())})),(e,i)=>(_(),S(q,null,[Fa,d("form",{class:"questions",onSubmit:xt(f,["prevent"])},[p.value?m(Ge)?(_(),S("article",Ga,Ya)):(_(),S("article",za,Za)):(_(),S(q,{key:0},[Ie(ya,{page:r.value},null,8,["page"]),d("div",null,[1===r.value?(_(),S(q,{key:0},[d("a",{href:m(a)?"#2":void 0,"aria-disabled":!m(a),role:"button",onClick:v}," Continue ",8,Va),m(o).length?(_(),S("p",Ma,"Missing Data: "+Z(m(o).join(", ")),1)):A("",!0)],64)):A("",!0),2===r.value?(_(),S(q,{key:1},[Ba,d("button",{"aria-busy":u.value,class:Vt([{"is-danger":c.value},"submit-button"]),disabled:!m(t)||m(ut)&&!s.value,type:"submit"},Z(g.value),11,Ra),m(n).length?(_(),S("p",Ua,"Missing Data: "+Z(m(n).join(", ")),1)):A("",!0)],64)):A("",!0)])],64))],32)],64))}});export{er as default};
