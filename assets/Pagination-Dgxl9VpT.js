import{d as _,c as u,o,a as t,t as m,_ as y,Z as O,s as R,L as z,E as b,K as N,r as p,I as j,y as q,a8 as B,a9 as D,i as S,q as v,F as h}from"./main-DPpLkC-k.js";import{r as T,b as M,d as F}from"./delay-CVqJpmjZ.js";const I={class:"text-center"},L={class:"confirm-options",id:"renew-close-form",method:"dialog"},V=_({__name:"ConfirmDialog",props:{userName:{}},emits:["confirm"],setup(e,{emit:a}){const s=a;return(a,l)=>(o(),u("article",null,[t("header",null,[l[1]||(l[1]=t("button",{"aria-label":"Close",class:"close",form:"renew-close-form"},null,-1)),t("p",I,"Confirm renewal of "+m(e.userName)+"?",1)]),t("form",L,[t("button",{onClickOnce:l[0]||(l[0]=e=>s("confirm"))},"Renew",32),l[2]||(l[2]=t("button",{class:"secondary"},"Cancel",-1))])]))}}),W=y(V,[["__scopeId","data-v-28ee97f4"]]);async function Z(e){await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`${e.CensusPlayer} requested renewal.\n<${M(e.Name)}>`})})}function x(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}const A=["aria-busy","disabled"],H=_({__name:"RenewButton",props:{userObject:{},buttonText:{},buttonTextFailed:{},buttonTextSuccess:{}},setup(e){const a=e,s=p(!1),l=p(!1),n=p(!1),c=p(null);function i(){x(),c.value?.showModal(),x()}const r=()=>c.value?.close(),v=b(()=>s.value?"":l.value?a.buttonTextFailed:n.value&&a.buttonTextSuccess?a.buttonTextSuccess:a.buttonText),d=O(),{tries:y,requested:f,triesExceeded:g}=R(d),k=b(()=>g.value||a.userObject.renewRequested||a.userObject.renewed);async function C(){if(!T||k.value)return;const e=a.userObject.CensusPlayer;s.value=!0;try{await Z(a.userObject),n.value=!0,a.userObject.renewRequested=!0,D(f,y,e)}catch(e){l.value=!0,console.warn(e)}finally{s.value=!1,setTimeout(()=>{n.value=!1,l.value=!1},F)}}return(a,n)=>(o(),u("div",null,[t("button",{"aria-busy":s.value,class:N([{"is-danger":l.value},"renew-button"]),disabled:k.value,type:"button",onClick:i},m(v.value),11,A),(o(),z(B,{to:"body"},[t("dialog",{ref_key:"dialogElement",ref:c,onClick:j(r,["self"])},[q(W,{"user-name":e.userObject.CensusPlayer,onConfirm:C},null,8,["user-name"])],512)]))]))}}),ie=y(H,[["__scopeId","data-v-56ffbe31"]]),re=15,ce=50,J={key:0,class:"page-select-wrapper"},K={class:"page-select-item"},G=["disabled"],Q={class:"page-select-item"},U={key:0,class:"placeholder"},X={key:1,class:"page-select-item"},Y={type:"button"},ee={key:2,class:"page-select-item"},te={key:0,class:"placeholder"},se={class:"page-select-item"},ae={class:"page-select-item"},ne=["disabled"],oe=_({__name:"Pagination",props:{data:{},pageSize:{}},emits:["change"],setup(e,{emit:a}){const s=e,l=a,n=p(1),c=b(()=>n.value-1),i=b(()=>Math.ceil(s.data.length/s.pageSize)),r=b(()=>s.data.slice(c.value*s.pageSize,c.value*s.pageSize+s.pageSize));return S(()=>{(n.value>i.value||n.value<1)&&(n.value=1)}),S(()=>l("change",r.value)),(e,a)=>i.value>1?(o(),u("div",J,[t("div",K,[t("button",{disabled:1===n.value,class:"outline",type:"button",onClick:a[0]||(a[0]=e=>n.value--)}," < ",8,G)]),n.value>2?(o(),u(h,{key:0},[t("div",Q,[t("button",{class:"outline",type:"button",onClick:a[1]||(a[1]=e=>n.value=1)}," 1 ")]),n.value-2!=1?(o(),u("div",U," ... ")):v("",!0)],64)):v("",!0),n.value-1>0?(o(),u("div",X,[(o(),u("button",{key:n.value-1,class:"outline",type:"button",onClick:a[2]||(a[2]=e=>n.value--)},m(n.value-1),1))])):v("",!0),(o(),u("div",{key:n.value,class:"page-select-item"},[t("button",Y,m(n.value),1)])),n.value+1<=i.value?(o(),u("div",ee,[(o(),u("button",{key:n.value+1,class:"outline",type:"button",onClick:a[3]||(a[3]=e=>n.value++)},m(n.value+1),1))])):v("",!0),n.value<i.value-1?(o(),u(h,{key:3},[n.value+2!==i.value?(o(),u("div",te," ... ")):v("",!0),t("div",se,[t("button",{class:"outline",type:"button",onClick:a[4]||(a[4]=e=>n.value=i.value)},m(i.value),1)])],64)):v("",!0),t("div",ae,[t("button",{disabled:n.value===i.value,class:"outline",type:"button",onClick:a[5]||(a[5]=e=>n.value++)}," > ",8,ne)])])):v("",!0)}}),de=y(oe,[["__scopeId","data-v-6ae68162"]]);export{de as P,ie as R,x as b,ce as r,re as t};
