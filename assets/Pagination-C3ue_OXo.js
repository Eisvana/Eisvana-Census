import{d as y,o,c as l,a as t,t as p,r as m,z as b,Z as z,s as O,D as R,H as N,m as j,G as B,a8 as D,a9 as M,_ as x,i as C,F as S,k as v}from"./main-DjwDBjVt.js";import{r as T,b as q,d as F}from"./delay-RzU4WgG3.js";const I={class:"text-center"},L={class:"confirm-options",id:"renew-close-form",method:"dialog"},V=y({__name:"ConfirmDialog",props:{userName:{}},emits:["confirm"],setup(e,{emit:a}){const s=a;return(e,a)=>(o(),l("article",null,[t("header",null,[a[1]||(a[1]=t("button",{"aria-label":"Close",class:"close",form:"renew-close-form"},null,-1)),t("p",I,"Confirm renewal of "+p(e.userName)+"?",1)]),t("form",L,[t("button",{onClickOnce:a[0]||(a[0]=e=>s("confirm"))},"Renew",32),a[2]||(a[2]=t("button",{class:"secondary"},"Cancel",-1))])]))}});async function H(e){await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`${e.CensusPlayer} requested renewal.\n<${q(e.Name)}>`})})}function h(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}const W=["aria-busy","disabled"],Z=y({__name:"RenewButton",props:{userObject:{},buttonText:{},buttonTextFailed:{},buttonTextSuccess:{}},setup(e){const a=e,s=m(!1),u=m(!1),n=m(!1),c=m(null);function i(){h(),c.value?.showModal(),h()}const r=()=>c.value?.close(),v=b((()=>s.value?"":u.value?a.buttonTextFailed:n.value&&a.buttonTextSuccess?a.buttonTextSuccess:a.buttonText)),d=z(),{tries:y,requested:f,triesExceeded:g}=O(d),k=b((()=>g.value||a.userObject.renewRequested||a.userObject.renewed));async function C(){if(!T||k.value)return;const e=a.userObject.CensusPlayer;s.value=!0;try{await H(a.userObject),n.value=!0,a.userObject.renewRequested=!0,M(f,y,e)}catch(e){u.value=!0,console.warn(e)}finally{s.value=!1,setTimeout((()=>{n.value=!1,u.value=!1}),F)}}return(e,a)=>(o(),l("div",null,[t("button",{"aria-busy":s.value,class:R([{"is-danger":u.value},"renew-button"]),disabled:k.value,type:"button",onClick:i},p(v.value),11,W),(o(),N(D,{to:"body"},[t("dialog",{ref_key:"dialogElement",ref:c,onClick:B(r,["self"])},[j(V,{"user-name":e.userObject.CensusPlayer,onConfirm:C},null,8,["user-name"])],512)]))]))}}),ue=x(Z,[["__scopeId","data-v-a65da13b"]]),ie=15,re=50,A={key:0,class:"page-select-wrapper"},G={class:"page-select-item"},J=["disabled"],K={class:"page-select-item"},Q={key:0,class:"placeholder"},U={key:1,class:"page-select-item"},X={type:"button"},Y={key:2,class:"page-select-item"},ee={key:0,class:"placeholder"},te={class:"page-select-item"},se={class:"page-select-item"},ae=["disabled"],ne=y({__name:"Pagination",props:{data:{},pageSize:{}},emits:["change"],setup(e,{emit:a}){const s=e,u=a,n=m(1),c=b((()=>n.value-1)),i=b((()=>Math.ceil(s.data.length/s.pageSize))),r=b((()=>s.data.slice(c.value*s.pageSize,c.value*s.pageSize+s.pageSize)));return C((()=>{(n.value>i.value||n.value<1)&&(n.value=1)})),C((()=>u("change",r.value))),(e,a)=>i.value>1?(o(),l("div",A,[t("div",G,[t("button",{disabled:1===n.value,class:"outline",type:"button",onClick:a[0]||(a[0]=e=>n.value--)}," < ",8,J)]),n.value>2?(o(),l(S,{key:0},[t("div",K,[t("button",{class:"outline",type:"button",onClick:a[1]||(a[1]=e=>n.value=1)}," 1 ")]),n.value-2!=1?(o(),l("div",Q," ... ")):v("",!0)],64)):v("",!0),n.value-1>0?(o(),l("div",U,[(o(),l("button",{key:n.value-1,class:"outline",type:"button",onClick:a[2]||(a[2]=e=>n.value--)},p(n.value-1),1))])):v("",!0),(o(),l("div",{key:n.value,class:"page-select-item"},[t("button",X,p(n.value),1)])),n.value+1<=i.value?(o(),l("div",Y,[(o(),l("button",{key:n.value+1,class:"outline",type:"button",onClick:a[3]||(a[3]=e=>n.value++)},p(n.value+1),1))])):v("",!0),n.value<i.value-1?(o(),l(S,{key:3},[n.value+2!==i.value?(o(),l("div",ee," ... ")):v("",!0),t("div",te,[t("button",{class:"outline",type:"button",onClick:a[4]||(a[4]=e=>n.value=i.value)},p(i.value),1)])],64)):v("",!0),t("div",se,[t("button",{disabled:n.value===i.value,class:"outline",type:"button",onClick:a[5]||(a[5]=e=>n.value++)}," > ",8,ae)])])):v("",!0)}}),ce=x(ne,[["__scopeId","data-v-58998cdc"]]);export{ce as P,ue as R,h as b,re as r,ie as t};
