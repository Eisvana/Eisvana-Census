import{d as y,r as p,o as u,c as i,a as t,t as m,B as b,a0 as T,s as N,G as O,m as z,F as f,a9 as D,_ as S,i as C,k as v}from"./main-B6dDMunI.js";import{r as $,b as E,d as R}from"./delay-bYoexC4a.js";const j=t("form",{method:"dialog",class:"close-button-wrapper"},[t("button",{"aria-label":"Close",class:"close"})],-1),B={class:"text-center"},q={method:"dialog",class:"confirm-options"},F=t("button",{class:"secondary"},"No",-1),M=y({__name:"ConfirmDialog",props:{userName:{}},emits:["confirm"],setup(e,{expose:a,emit:l}){const s=p(null);return a({toggleModal:()=>{s.value?.showModal(),document.activeElement?.blur()}}),(e,a)=>(u(),i("dialog",{ref_key:"dialogElement",ref:s},[t("article",null,[t("header",null,[j,t("p",B,"Confirm renewal of "+m(e.userName)+"?",1)]),t("form",q,[t("button",{onClickOnce:a[0]||(a[0]=t=>e.$emit("confirm"))},"Yes",32),F])])],512))}});async function I(e){await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`${e.CensusPlayer} requested renewal.\n<${E(e.Name)}>`})})}const V=["aria-busy","disabled"],L=y({__name:"RenewButton",props:{userObject:{},buttonText:{},buttonTextFailed:{},buttonTextSuccess:{}},setup(e){const a=e,l=p(!1),s=p(!1),n=p(!1),o=b((()=>l.value?"":s.value?a.buttonTextFailed:n.value&&a.buttonTextSuccess?a.buttonTextSuccess:a.buttonText)),c=T(),{tries:r,requested:v,triesExceeded:d}=N(c),y=p(null),g=b((()=>d.value||a.userObject.renewRequested||a.userObject.renewed));async function C(){if(!$||g.value)return;const e=a.userObject.CensusPlayer;l.value=!0;try{await I(a.userObject),n.value=!0,a.userObject.renewRequested=!0,D(v,r,e)}catch(e){s.value=!0,console.warn(e)}finally{l.value=!1,setTimeout((()=>{n.value=!1,s.value=!1}),R)}}const k=()=>y.value?.toggleModal();return(e,a)=>(u(),i(f,null,[t("button",{"aria-busy":l.value,class:O([{"is-danger":s.value},"renew-button"]),disabled:g.value,type:"button",onClick:k},m(o.value),11,V),z(M,{"user-name":e.userObject.CensusPlayer,ref_key:"confirmDialog",ref:y,onConfirm:C},null,8,["user-name"])],64))}}),ne=S(L,[["__scopeId","data-v-19ba0247"]]),le=15,ue=50,W={key:0,class:"page-select-wrapper"},G={class:"page-select-item"},J=["disabled"],Y={class:"page-select-item"},Z={key:0,class:"placeholder"},A={key:1,class:"page-select-item"},H={class:"page-select-item"},K={type:"button"},Q={key:2,class:"page-select-item"},U={key:0,class:"placeholder"},X={class:"page-select-item"},ee={class:"page-select-item"},te=["disabled"],se=y({__name:"Pagination",props:{data:{},pageSize:{}},emits:["change"],setup(e,{emit:a}){const l=e,s=a,n=p(1),o=b((()=>n.value-1)),c=b((()=>Math.ceil(l.data.length/l.pageSize))),r=b((()=>l.data.slice(o.value*l.pageSize,o.value*l.pageSize+l.pageSize)));return C((()=>{(n.value>c.value||n.value<1)&&(n.value=1)})),C((()=>s("change",r.value))),(e,a)=>c.value>1?(u(),i("div",W,[t("div",G,[t("button",{disabled:1===n.value,class:"outline",type:"button",onClick:a[0]||(a[0]=e=>n.value--)}," < ",8,J)]),n.value>2?(u(),i(f,{key:0},[t("div",Y,[t("button",{class:"outline",type:"button",onClick:a[1]||(a[1]=e=>n.value=1)}," 1 ")]),n.value-2!=1?(u(),i("div",Z," ... ")):v("",!0)],64)):v("",!0),n.value-1>0?(u(),i("div",A,[t("button",{class:"outline",type:"button",onClick:a[2]||(a[2]=e=>n.value--)},m(n.value-1),1)])):v("",!0),t("div",H,[t("button",K,m(n.value),1)]),n.value+1<=c.value?(u(),i("div",Q,[t("button",{class:"outline",type:"button",onClick:a[3]||(a[3]=e=>n.value++)},m(n.value+1),1)])):v("",!0),n.value<c.value-1?(u(),i(f,{key:3},[n.value+2!==c.value?(u(),i("div",U," ... ")):v("",!0),t("div",X,[t("button",{class:"outline",type:"button",onClick:a[4]||(a[4]=e=>n.value=c.value)},m(c.value),1)])],64)):v("",!0),t("div",ee,[t("button",{disabled:n.value===c.value,class:"outline",type:"button",onClick:a[5]||(a[5]=e=>n.value++)}," > ",8,te)])])):v("",!0)}}),ie=S(se,[["__scopeId","data-v-2c00e48f"]]);export{ie as P,ne as R,ue as r,le as t};
