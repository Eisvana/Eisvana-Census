import{d as te,u as ue,s as fe,o as y,c as D,a as d,b as Ce,t as Y,e as m,f as Ft,w as C,v as Zt,g as V,F as R,h as ce,i as Tt,j as _n,k as O,l as tt,m as be,n as wn,p as Dn,r as ie,q as Jt,x as We,y as Ut,z as ft,A as ht,_ as Ae,B as $,C as En,D as Ke,E as Qt,G as $t,H as Sn,I as Ct,J as ze,K as en,L as tn,M as lt,N as In,O as Tn,P as Cn,Q as kn,R as Pn,S as xn,T as Rt}from"./main-D5p7ffbv.js";import{s as On}from"./censusSubmission-CjfIyr_9.js";import{b as $n,d as Nn}from"./delay-CXW0bzkw.js";const An=d("p",{class:"question",id:"timezone-input"}," [OPTIONAL] Timezone ",-1),Vn={class:"subtitle"},Mn={class:"text-bold"},Fn=d("br",null,null,-1),Un=d("p",{class:"question",id:"activity-input"}," [OPTIONAL] In this time zone, when do you play No Man's Sky the most? ",-1),Rn=d("p",{class:"subtitle"}," I. e. mornings, afternoon, evenings, late night, 9 AM to 12 PM, etc. This is used in order to better plan events. ",-1),Xn=te({__name:"TimezoneQuestions",setup(e){const t=ue(),{playerData:n}=fe(t);return(e,t)=>(y(),D(R,null,[d("article",null,[An,d("p",Vn,[Ce(" Detected timezone: "),d("span",Mn,Y(m(Ft)),1),Fn,Ce(" This will be used to plan future events accordingly. This information will remain private and will only be shared with Eisvana Leadership. ")]),d("label",null,[d("span",null,"Share timezone ("+Y(m(Ft))+")",1),C(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).shareTimezone=e),"aria-labelledby":"timezone-input",type:"checkbox"},null,512),[[Zt,m(n).shareTimezone,void 0,{trim:!0}]])])]),d("article",null,[Un,Rn,C(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).activeTime=e),"aria-labelledby":"activity-input",type:"text"},null,512),[[V,m(n).activeTime,void 0,{trim:!0}]])])],64))}}),Bn=d("p",{class:"question required",id:"discord-name"}," What is your Discord name? ",-1),Gn=d("p",{class:"subtitle"},"Please enter your username, not your display name.",-1),Ln=["aria-invalid","pattern"],qn={key:0,class:"error"},Wn=d("p",{class:"question",id:"reddit-name"}," What is your Reddit name? ",-1),zn=["aria-invalid"],Yn={key:0,class:"error"},Hn={key:0},jn=d("p",{class:"question",id:"social-name"}," Social media link if you don't have Reddit ",-1),Kn=d("p",{class:"subtitle"}," If you don't have Reddit, do you have a different social media account that you'd like to have on the census (Facebook, Instagram, etc.)? Please put the full link here. ",-1),Zn=["aria-invalid"],Jn={key:0,class:"error"},Qn=d("p",{class:"question",id:"wiki-name"}," If you have a NMS Fandom wiki account, what's its name? (else leave empty) ",-1),eo=["aria-invalid"],to={key:0,class:"error"},no=d("p",{class:"question required",id:"ingame-name"}," What is your ingame name? ",-1),oo=d("p",{class:"subtitle"},"Found on the top left in your inventory/pause menu. Exclude any game titles.",-1),io=["aria-invalid"],ao={key:0,class:"error"},ro=d("p",{class:"question",id:"friend-code"}," No Man's Sky Friend Code ",-1),lo=d("p",{class:"subtitle"},'Please enter your friend code in the following format: "XXXX-XXXX-XXXXX" including dashes.',-1),so=["aria-invalid"],uo={key:0,class:"error"},co=d("p",{class:"question required",id:"arrival-date"}," Date of Arrival ",-1),po=d("p",{class:"subtitle"},"When did you arrive in Eisvana space?",-1),fo=te({__name:"PlayerData",setup(e){const t=ue(),{playerData:n,validation:a,isDiscordValid:o,isRedditValid:i,isFriendValid:l,isNameValid:r,isSocialValid:s}=fe(t),{friend:u,wikiName:c}=ce(n.value),{wikiUserExists:p}=ce(a.value);return Tt((async()=>p.value=!c.value||await wn(c.value))),Tt((()=>u.value=u.value.toUpperCase())),(e,t)=>(y(),D(R,null,[d("article",null,[Bn,Gn,C(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).discord=e),"aria-invalid":!m(o)||void 0,pattern:m(_n),"aria-labelledby":"discord-name",type:"text"},null,8,Ln),[[V,m(n).discord,void 0,{trim:!0}]]),m(o)?O("",!0):(y(),D("p",qn," Use your username, not your display name "))]),d("article",null,[Wn,C(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).reddit=e),"aria-invalid":!m(i)||void 0,"aria-labelledby":"reddit-name",type:"text"},null,8,zn),[[V,m(n).reddit,void 0,{trim:!0}]]),m(i)?O("",!0):(y(),D("p",Yn," Please use your Reddit username without the u/ "))]),m(n).reddit?O("",!0):(y(),D("article",Hn,[jn,Kn,C(d("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>m(n).social=e),"aria-invalid":!m(s)||void 0,"aria-labelledby":"social-name",type:"text"},null,8,Zn),[[V,m(n).social,void 0,{trim:!0}]]),m(s)?O("",!0):(y(),D("p",Jn," Please give a link to that profile. "))])),d("article",null,[Qn,C(d("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>m(n).wikiName=e),"aria-invalid":!m(p)||void 0,"aria-labelledby":"wiki-name",type:"text"},null,8,eo),[[V,m(n).wikiName,void 0,{trim:!0,lazy:!0}]]),m(p)?O("",!0):(y(),D("p",to," This wiki user doesn't exist! "))]),d("article",null,[no,oo,C(d("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>m(n).player=e),"aria-invalid":!m(r)||void 0,"aria-labelledby":"ingame-name",type:"text"},null,8,io),[[V,m(n).player,void 0,{trim:!0}]]),m(r)?O("",!0):(y(),D("p",ao," Please enter your ingame name, not your platform "))]),d("article",null,[ro,lo,C(d("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>m(n).friend=e),"aria-invalid":!m(l)||void 0,"aria-labelledby":"friend-code",type:"text"},null,8,so),[[V,m(n).friend,void 0,{trim:!0,lazy:!0}]]),m(l)?O("",!0):(y(),D("p",uo," Format must be as follows: XXXX-XXXX-XXXXX "))]),m(tt)?(y(),D(R,{key:1},[d("article",null,[co,po,C(d("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>m(n).arrival=e),"aria-labelledby":"arrival-date",type:"date"},null,512),[[V,m(n).arrival,void 0,{trim:!0}]])]),be(Xn)],64)):O("",!0)],64))}});function ho(e,t){const{target:n}=e;if(!(n instanceof HTMLInputElement))return;const a="number"==typeof t.value?parseInt(n.value):n.value;t.value===a&&(t.value=void 0)}const mo=e=>(ft("data-v-4558a41c"),e=e(),ht(),e),go={class:"radio-select"},vo=["for"],bo=["id","name","value"],yo={key:0,class:"radio-select-item-other"},_o=["for"],wo=["id","name","value"],Do=mo((()=>d("span",null,"Other:",-1))),Eo=["id"],So=te({__name:"MultipleChoice",props:Dn({items:{},name:{},other:{type:Boolean}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ie(null),n=Jt(e,"modelValue"),a=ie(""),o=e=>ho(e,n),i=()=>n.value=a.value,l=()=>t.value?.focus();return(e,r)=>(y(),D("div",go,[(y(!0),D(R,null,We(e.items,((t,a)=>(y(),D("label",{for:`${e.name}-${a}`,key:a,class:"multiple-choice-label"},[C(d("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e),id:`${e.name}-${a}`,name:e.name,value:t,type:"radio",onClick:o},null,8,bo),[[Ut,n.value,void 0,{trim:!0}]]),d("span",null,Y(t),1)],8,vo)))),128)),e.other?(y(),D("div",yo,[d("label",{for:`${e.name}-other`,class:"other-input-label"},[C(d("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),id:`${e.name}-other`,name:e.name,value:a.value,type:"radio",onClick:o,onChange:l},null,40,wo),[[Ut,n.value,void 0,{trim:!0}]]),Do],8,_o),C(d("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>a.value=e),id:`${e.name}-other-input`,class:"input-other",ref_key:"otherInput",ref:t,type:"text",onInput:i},null,40,Eo),[[V,a.value,void 0,{trim:!0}]])])):O("",!0)]))}}),Xt=Ae(So,[["__scopeId","data-v-4558a41c"]]),Io={class:"glyph-input"},To={class:"glyph-input-wrapper"},Co=["aria-invalid","maxlength"],ko={key:0,class:"error"},Po={class:"portal-buttons grid"},xo=["onClick"],Oo={class:"glyph-display-wrapper"},$o={class:"glyphs"},No=te({__name:"GlyphInput",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=/[0-9A-F]/,n=Jt(e,"modelValue"),a=$((()=>n.value.slice(4)in En));function o(){n.value=n.value.slice(0,-1)}Tt((()=>n.value=n.value.toUpperCase().split("").filter((e=>t.test(e))).join("")));const i=e=>e.toString(16).toUpperCase();return(e,t)=>(y(),D("div",Io,[d("div",To,[C(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"aria-invalid":n.value.length===m(Ke)&&!a.value||void 0,maxlength:m(Ke),"aria-labelledby":"glyph-input",class:"glyphs-input",type:"text"},null,8,Co),[[V,n.value,void 0,{trim:!0}]]),d("button",{class:"delete-button is-danger",type:"button",onClick:o}," ← Delete ")]),n.value.length!==m(Ke)||a.value?O("",!0):(y(),D("p",ko," Glyphs are outside of Eisvana space! ")),d("div",Po,[(y(),D(R,null,We(16,(e=>d("button",{class:"button glyphs",type:"button",onClick:t=>function(e){n.value.length<Ke&&(n.value+=e)}(i(e-1))},Y(i(e-1)),9,xo))),64))]),C(d("p",Oo,[d("output",$o,Y(n.value),1)],512),[[Qt,n.value]])]))}}),Ao=Ae(No,[["__scopeId","data-v-ba35a71e"]]);
/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pe.apply(this,arguments)}function Mo(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}function Fo(e,t){if(null==e)return{};var n,a,o=Mo(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Uo="1.15.2";function de(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var he=de(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ye=de(/Edge/i),Gt=de(/firefox/i),Xe=de(/safari/i)&&!de(/chrome/i)&&!de(/android/i),nn=de(/iP(ad|od|hone)/i),on=de(/chrome/i)&&de(/android/i),an={capture:!1,passive:!1};function I(e,t,n){e.addEventListener(t,n,!he&&an)}function S(e,t,n){e.removeEventListener(t,n,!he&&an)}function st(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ro(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function oe(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&st(e,t):st(e,t))||a&&e===n)return e;if(e===n)break}while(e=Ro(e))}return null}var Be,Lt=/\s+/g;function K(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Lt," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Lt," ")}}function v(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];!(t in a)&&-1===t.indexOf("webkit")&&(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function $e(e,t){var n="";if("string"==typeof e)n=e;else do{var a=v(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function rn(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,i=a.length;if(n)for(;o<i;o++)n(a[o],o);return a}return[]}function le(){return document.scrollingElement||document.documentElement}function A(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var i,l,r,s,u,d,c;if(e!==window&&e.parentNode&&e!==le()?(l=(i=e.getBoundingClientRect()).top,r=i.left,s=i.bottom,u=i.right,d=i.height,c=i.width):(l=0,r=0,s=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!he))do{if(o&&o.getBoundingClientRect&&("none"!==v(o,"transform")||n&&"static"!==v(o,"position"))){var p=o.getBoundingClientRect();l-=p.top+parseInt(v(o,"border-top-width")),r-=p.left+parseInt(v(o,"border-left-width")),s=l+i.height,u=r+i.width;break}}while(o=o.parentNode);if(a&&e!==window){var h=$e(o||e),m=h&&h.a,f=h&&h.d;h&&(s=(l/=f)+(d/=f),u=(r/=m)+(c/=m))}return{top:l,left:r,bottom:s,right:u,width:c,height:d}}}function qt(e,t,n){for(var a=_e(e,!0),o=A(e)[t];a;){var i=A(a)[n];if(!("top"===n||"left"===n?o>=i:o<=i))return a;if(a===le())break;a=_e(a,!1)}return!1}function Ne(e,t,n,a){for(var o=0,i=0,l=e.children;i<l.length;){if("none"!==l[i].style.display&&l[i]!==b.ghost&&(a||l[i]!==b.dragged)&&oe(l[i],n.draggable,e,!1)){if(o===t)return l[i];o++}i++}return null}function Nt(e,t){for(var n=e.lastElementChild;n&&(n===b.ghost||"none"===v(n,"display")||t&&!st(n,t));)n=n.previousElementSibling;return n||null}function ee(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==b.clone&&(!t||st(e,t))&&n++;return n}function Wt(e){var t=0,n=0,a=le();if(e)do{var o=$e(e),i=o.a,l=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*l}while(e!==a&&(e=e.parentNode));return[t,n]}function Xo(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}function _e(e,t){if(!e||!e.getBoundingClientRect)return le();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=v(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return le();if(a||t)return n;a=!0}}}while(n=n.parentNode);return le()}function Bo(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function vt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ln(e,t){return function(){if(!Be){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),Be=setTimeout((function(){Be=void 0}),t)}}}function Go(){clearTimeout(Be),Be=void 0}function sn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function un(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function dn(e,t,n){var a={};return Array.from(e.children).forEach((function(o){var i,l,r,s;if(oe(o,t.draggable,e,!1)&&!o.animated&&o!==n){var u=A(o);a.left=Math.min(null!==(i=a.left)&&void 0!==i?i:1/0,u.left),a.top=Math.min(null!==(l=a.top)&&void 0!==l?l:1/0,u.top),a.right=Math.max(null!==(r=a.right)&&void 0!==r?r:-1/0,u.right),a.bottom=Math.max(null!==(s=a.bottom)&&void 0!==s?s:-1/0,u.bottom)}})),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var J="Sortable"+(new Date).getTime();function Lo(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==v(e,"display")&&e!==b.ghost){t.push({target:e,rect:A(e)});var n=se({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=$e(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(Xo(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,l=n.fromRect,r=A(n),s=n.prevFromRect,u=n.prevToRect,d=e.rect,c=$e(n,!0);c&&(r.top-=c.f,r.left-=c.e),n.toRect=r,n.thisAnimationDuration&&vt(s,r)&&!vt(l,r)&&(d.top-r.top)/(d.left-r.left)==(l.top-r.top)/(l.left-r.left)&&(t=Wo(d,s,u,a.options)),vt(r,l)||(n.prevFromRect=l,n.prevToRect=r,t||(t=a.options.animation),a.animate(n,d,r,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){v(e,"transition",""),v(e,"transform","");var o=$e(this.el),i=o&&o.a,l=o&&o.d,r=(t.left-n.left)/(i||1),s=(t.top-n.top)/(l||1);e.animatingX=!!r,e.animatingY=!!s,v(e,"transform","translate3d("+r+"px,"+s+"px,0)"),this.forRepaintDummy=qo(e),v(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),v(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){v(e,"transition",""),v(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function qo(e){return e.offsetWidth}function Wo(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}var ke=[],bt={initializeByDefault:!0},He={mount:function(e){for(var t in bt)bt.hasOwnProperty(t)&&!(t in e)&&(e[t]=bt[t]);ke.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ke.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";ke.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](se({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](se({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in ke.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var i=new a(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,pe(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);typeof i<"u"&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return ke.forEach((function(a){"function"==typeof a.eventProperties&&pe(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return ke.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function zo(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,i=e.cloneEl,l=e.toEl,r=e.fromEl,s=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,c=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[J]){var v,f=t.options,g="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||he||Ye?(v=document.createEvent("Event")).initEvent(a,!0,!0):v=new CustomEvent(a,{bubbles:!0,cancelable:!0}),v.to=l||n,v.from=r||n,v.item=o||n,v.clone=i,v.oldIndex=s,v.newIndex=u,v.oldDraggableIndex=d,v.newDraggableIndex=c,v.originalEvent=p,v.pullMode=h?h.lastPutMode:void 0;var b=se(se({},m),He.getEventProperties(a,t));for(var y in b)v[y]=b[y];n&&n.dispatchEvent(v),f[g]&&f[g].call(t,v)}}var Yo=["evt"],j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=Fo(n,Yo);He.pluginEvent.bind(b)(e,t,se({dragEl:h,parentEl:P,ghostEl:_,rootEl:T,nextEl:Te,lastDownEl:ot,cloneEl:k,cloneHidden:ye,dragStarted:Fe,putSortable:U,activeSortable:b.active,originalEvent:a,oldIndex:Oe,oldDraggableIndex:Ge,newIndex:Z,newDraggableIndex:ve,hideGhostForTarget:hn,unhideGhostForTarget:mn,cloneNowHidden:function(){ye=!0},cloneNowShown:function(){ye=!1},dispatchSortableEvent:function(e){z({sortable:t,name:e,originalEvent:a})}},o))};function z(e){zo(se({putSortable:U,cloneEl:k,targetEl:h,rootEl:T,oldIndex:Oe,oldDraggableIndex:Ge,newIndex:Z,newDraggableIndex:ve},e))}var h,P,_,T,Te,ot,k,ye,Oe,Z,Ge,ve,Ze,U,Se,ne,yt,_t,zt,Yt,Fe,Pe,Le,it,B,xe=!1,ut=!1,dt=[],qe=!1,Je=!1,wt=[],kt=!1,ct=[],mt=typeof document<"u",Qe=nn,Ht=Ye||he?"cssFloat":"float",Ho=mt&&!on&&!nn&&"draggable"in document.createElement("div"),cn=function(){if(mt){if(he)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),pn=function(e,t){var n=v(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Ne(e,0,t),i=Ne(e,1,t),l=o&&v(o),r=i&&v(i),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+A(o).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+A(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&"none"!==l.float){var d="left"===l.float?"left":"right";return!i||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return o&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=a&&"none"===n[Ht]||i&&"none"===n[Ht]&&s+u>a)?"vertical":"horizontal"},jo=function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,l=n?t.left:t.top,r=n?t.right:t.bottom,s=n?t.width:t.height;return a===l||o===r||a+i/2===l+s/2},Ko=function(e,t){var n;return dt.some((function(a){var o=a[J].options.emptyInsertThreshold;if(o&&!Nt(a)){var i=A(a),l=e>=i.left-o&&e<=i.right+o,r=t>=i.top-o&&t<=i.bottom+o;if(l&&r)return n=a}})),n},fn=function(e){function t(e,n){return function(a,o,i,l){var r=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||r))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,o,i,l),n)(a,o,i,l);var s=(n?a:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},a=e.group;(!a||"object"!=nt(a))&&(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},hn=function(){!cn&&_&&v(_,"display","none")},mn=function(){!cn&&_&&v(_,"display","")};mt&&!on&&document.addEventListener("click",(function(e){if(ut)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ut=!1,!1}),!0);var Ie=function(e){if(h){e=e.touches?e.touches[0]:e;var t=Ko(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[J]._onDragOver(n)}}},Zo=function(e){h&&h.parentNode[J]._isOutsideThisEl(e.target)};function b(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=pe({},t),e[J]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==b.supportPointer&&"PointerEvent"in window&&!Xe,emptyInsertThreshold:5};for(var a in He.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in fn(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Ho,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?I(e,"pointerdown",this._onTapStart):(I(e,"mousedown",this._onTapStart),I(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(I(e,"dragover",this),I(e,"dragenter",this)),dt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),pe(this,Lo())}function Jo(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function et(e,t,n,a,o,i,l,r){var s,u,d=e[J],c=d.options.onMove;return!window.CustomEvent||he||Ye?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=o||t,s.relatedRect=i||A(t),s.willInsertAfter=r,s.originalEvent=l,e.dispatchEvent(s),c&&(u=c.call(d,s,l)),u}function Dt(e){e.draggable=!1}function Qo(){kt=!1}function ei(e,t,n){var a=A(Ne(n.el,0,n.options,!0)),o=dn(n.el,n.options,_);return t?e.clientX<o.left-10||e.clientY<a.top&&e.clientX<a.right:e.clientY<o.top-10||e.clientY<a.bottom&&e.clientX<a.left}function ti(e,t,n){var a=A(Nt(n.el,n.options.draggable)),o=dn(n.el,n.options,_);return t?e.clientX>o.right+10||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>o.bottom+10||e.clientX>a.right&&e.clientY>a.top}function ni(e,t,n,a,o,i,l,r){var s=a?e.clientY:e.clientX,u=a?n.height:n.width,d=a?n.top:n.left,c=a?n.bottom:n.right,p=!1;if(!l)if(r&&it<u*o){if(!qe&&(1===Le?s>d+u*i/2:s<c-u*i/2)&&(qe=!0),qe)p=!0;else if(1===Le?s<d+it:s>c-it)return-Le}else if(s>d+u*(1-o)/2&&s<c-u*(1-o)/2)return oi(t);return(p=p||l)&&(s<d+u*i/2||s>c-u*i/2)?s>d+u/2?1:-1:0}function oi(e){return ee(h)<ee(e)?1:-1}function ii(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function ai(e){ct.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&ct.push(a)}}function at(e){return setTimeout(e,0)}function Pt(e){return clearTimeout(e)}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Pe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,u=a.filter;if(ai(n),!h&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||a.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Xe||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=oe(r,a.draggable,n,!1))&&r.animated||ot===r)){if(Oe=ee(r),Ge=ee(r,a.draggable),"function"==typeof u){if(u.call(this,e,r,this))return z({sortable:t,rootEl:s,name:"filter",targetEl:r,toEl:n,fromEl:n}),j("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(a){if(a=oe(s,a.trim(),n,!1))return z({sortable:t,rootEl:a,name:"filter",targetEl:r,fromEl:n,toEl:n}),j("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!oe(s,a.handle,n,!1)||this._prepareDragStart(e,l,r)}}},_prepareDragStart:function(e,t,n){var a,o=this,i=o.el,l=o.options,r=i.ownerDocument;if(n&&!h&&n.parentNode===i){var s=A(n);if(T=i,P=(h=n).parentNode,Te=h.nextSibling,ot=n,Ze=l.group,b.dragged=h,Se={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},zt=Se.clientX-s.left,Yt=Se.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",a=function(){j("delayEnded",o,{evt:e}),b.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Gt&&o.nativeDraggable&&(h.draggable=!0),o._triggerDragStart(e,t),z({sortable:o,name:"choose",originalEvent:e}),K(h,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){rn(h,e.trim(),Dt)})),I(r,"dragover",Ie),I(r,"mousemove",Ie),I(r,"touchmove",Ie),I(r,"mouseup",o._onDrop),I(r,"touchend",o._onDrop),I(r,"touchcancel",o._onDrop),Gt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),j("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(Ye||he))a();else{if(b.eventCanceled)return void this._onDrop();I(r,"mouseup",o._disableDelayedDrag),I(r,"touchend",o._disableDelayedDrag),I(r,"touchcancel",o._disableDelayedDrag),I(r,"mousemove",o._delayedDragTouchMoveHandler),I(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&I(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&Dt(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;S(e,"mouseup",this._disableDelayedDrag),S(e,"touchend",this._disableDelayedDrag),S(e,"touchcancel",this._disableDelayedDrag),S(e,"mousemove",this._delayedDragTouchMoveHandler),S(e,"touchmove",this._delayedDragTouchMoveHandler),S(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):I(document,t?"touchmove":"mousemove",this._onTouchMove):(I(h,"dragend",this),I(T,"dragstart",this._onDragStart));try{document.selection?at((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(xe=!1,T&&h){j("dragStarted",this,{evt:t}),this.nativeDraggable&&I(document,"dragover",Zo);var n=this.options;!e&&K(h,n.dragClass,!1),K(h,n.ghostClass,!0),b.active=this,e&&this._appendGhost(),z({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ne){this._lastX=ne.clientX,this._lastY=ne.clientY,hn();for(var e=document.elementFromPoint(ne.clientX,ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ne.clientX,ne.clientY))!==t;)t=e;if(h.parentNode[J]._isOutsideThisEl(e),t)do{if(t[J]){if(t[J]._onDragOver({clientX:ne.clientX,clientY:ne.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);mn()}},_onTouchMove:function(e){if(Se){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=_&&$e(_,!0),l=_&&i&&i.a,r=_&&i&&i.d,s=Qe&&B&&Wt(B),u=(o.clientX-Se.clientX+a.x)/(l||1)+(s?s[0]-wt[0]:0)/(l||1),d=(o.clientY-Se.clientY+a.y)/(r||1)+(s?s[1]-wt[1]:0)/(r||1);if(!b.active&&!xe){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(_){i?(i.e+=u-(yt||0),i.f+=d-(_t||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var c="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");v(_,"webkitTransform",c),v(_,"mozTransform",c),v(_,"msTransform",c),v(_,"transform",c),yt=u,_t=d,ne=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_){var e=this.options.fallbackOnBody?document.body:T,t=A(h,!0,Qe,!0,e),n=this.options;if(Qe){for(B=e;"static"===v(B,"position")&&"none"===v(B,"transform")&&B!==document;)B=B.parentNode;B!==document.body&&B!==document.documentElement?(B===document&&(B=le()),t.top+=B.scrollTop,t.left+=B.scrollLeft):B=le(),wt=Wt(B)}K(_=h.cloneNode(!0),n.ghostClass,!1),K(_,n.fallbackClass,!0),K(_,n.dragClass,!0),v(_,"transition",""),v(_,"transform",""),v(_,"box-sizing","border-box"),v(_,"margin",0),v(_,"top",t.top),v(_,"left",t.left),v(_,"width",t.width),v(_,"height",t.height),v(_,"opacity","0.8"),v(_,"position",Qe?"absolute":"fixed"),v(_,"zIndex","100000"),v(_,"pointerEvents","none"),b.ghost=_,e.appendChild(_),v(_,"transform-origin",zt/parseInt(_.style.width)*100+"% "+Yt/parseInt(_.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;j("dragStart",this,{evt:e}),b.eventCanceled?this._onDrop():(j("setupClone",this),b.eventCanceled||((k=un(h)).removeAttribute("id"),k.draggable=!1,k.style["will-change"]="",this._hideClone(),K(k,this.options.chosenClass,!1),b.clone=k),n.cloneId=at((function(){j("clone",n),!b.eventCanceled&&(n.options.removeCloneOnHide||T.insertBefore(k,h),n._hideClone(),z({sortable:n,name:"clone"}))})),!t&&K(h,o.dragClass,!0),t?(ut=!0,n._loopId=setInterval(n._emulateDragOver,50)):(S(document,"mouseup",n._onDrop),S(document,"touchend",n._onDrop),S(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,h)),I(document,"drop",n),v(h,"transform","translateZ(0)")),xe=!0,n._dragStartId=at(n._dragStarted.bind(n,t,e)),I(document,"selectstart",n),Fe=!0,Xe&&v(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,o,i=this.el,l=e.target,r=this.options,s=r.group,u=b.active,d=Ze===s,c=r.sort,p=U||u,m=this,f=!1;if(!kt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=oe(l,r.draggable,i,!0),R("dragOver"),b.eventCanceled)return f;if(h.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||m._ignoreWhileAnimating===l)return B(!1);if(ut=!1,u&&!r.disabled&&(d?c||(a=P!==T):U===this||(this.lastPutMode=Ze.checkPull(this,u,h,e))&&s.checkPut(this,u,h,e))){if(o="vertical"===this._getDirection(e,l),t=A(h),R("dragOverValid"),b.eventCanceled)return f;if(a)return P=T,X(),this._hideClone(),R("revert"),b.eventCanceled||(Te?T.insertBefore(h,Te):T.appendChild(h)),B(!0);var g=Nt(i,r.draggable);if(!g||ti(e,o,this)&&!g.animated){if(g===h)return B(!1);if(g&&i===e.target&&(l=g),l&&(n=A(l)),!1!==et(T,i,h,t,l,n,e,!!l))return X(),g&&g.nextSibling?i.insertBefore(h,g.nextSibling):i.appendChild(h),P=i,Y(),B(!0)}else if(g&&ei(e,o,this)){var y=Ne(i,0,r,!0);if(y===h)return B(!1);if(n=A(l=y),!1!==et(T,i,h,t,l,n,e,!1))return X(),i.insertBefore(h,y),P=i,Y(),B(!0)}else if(l.parentNode===i){n=A(l);var w,D,S,I=h.parentNode!==i,k=!jo(h.animated&&h.toRect||t,l.animated&&l.toRect||n,o),E=o?"top":"left",C=qt(l,"top","top")||qt(h,"top","top"),x=C?C.scrollTop:void 0;if(Pe!==l&&(D=n[E],qe=!1,Je=!k&&r.invertSwap||I),0!==(w=ni(e,l,n,o,k?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,Je,Pe===l))){var O=ee(h);do{O-=w,S=P.children[O]}while(S&&("none"===v(S,"display")||S===_))}if(0===w||S===l)return B(!1);Pe=l,Le=w;var N=l.nextElementSibling,M=!1,V=et(T,i,h,t,l,n,e,M=1===w);if(!1!==V)return(1===V||-1===V)&&(M=1===V),kt=!0,setTimeout(Qo,30),X(),M&&!N?i.appendChild(h):l.parentNode.insertBefore(h,M?N:l),C&&sn(C,0,x-C.scrollTop),P=h.parentNode,void 0!==D&&!Je&&(it=Math.abs(D-A(l)[E])),Y(),B(!0)}if(i.contains(h))return B(!1)}return!1}function R(r,s){j(r,m,se({evt:e,isOwner:d,axis:o?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:c,fromSortable:p,target:l,completed:B,onMove:function(n,a){return et(T,i,h,t,n,A(n),e,a)},changed:Y},s))}function X(){R("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function B(t){return R("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(m),m!==p&&(K(h,U?U.options.ghostClass:u.options.ghostClass,!1),K(h,r.ghostClass,!0)),U!==m&&m!==b.active?U=m:m===b.active&&U&&(U=null),p===m&&(m._ignoreWhileAnimating=l),m.animateAll((function(){R("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===h&&!h.animated||l===i&&!l.animated)&&(Pe=null),!r.dragoverBubble&&!e.rootEl&&l!==document&&(h.parentNode[J]._isOutsideThisEl(e.target),!t&&Ie(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function Y(){Z=ee(h),ve=ee(h,r.draggable),z({sortable:m,name:"change",toEl:i,newIndex:Z,newDraggableIndex:ve,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){S(document,"mousemove",this._onTouchMove),S(document,"touchmove",this._onTouchMove),S(document,"pointermove",this._onTouchMove),S(document,"dragover",Ie),S(document,"mousemove",Ie),S(document,"touchmove",Ie)},_offUpEvents:function(){var e=this.el.ownerDocument;S(e,"mouseup",this._onDrop),S(e,"touchend",this._onDrop),S(e,"pointerup",this._onDrop),S(e,"touchcancel",this._onDrop),S(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Z=ee(h),ve=ee(h,n.draggable),j("drop",this,{evt:e}),P=h&&h.parentNode,Z=ee(h),ve=ee(h,n.draggable),b.eventCanceled||(xe=!1,Je=!1,qe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pt(this.cloneId),Pt(this._dragStartId),this.nativeDraggable&&(S(document,"drop",this),S(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xe&&v(document.body,"user-select",""),v(h,"transform",""),e&&(Fe&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),_&&_.parentNode&&_.parentNode.removeChild(_),(T===P||U&&"clone"!==U.lastPutMode)&&k&&k.parentNode&&k.parentNode.removeChild(k),h&&(this.nativeDraggable&&S(h,"dragend",this),Dt(h),h.style["will-change"]="",Fe&&!xe&&K(h,U?U.options.ghostClass:this.options.ghostClass,!1),K(h,this.options.chosenClass,!1),z({sortable:this,name:"unchoose",toEl:P,newIndex:null,newDraggableIndex:null,originalEvent:e}),T!==P?(Z>=0&&(z({rootEl:P,name:"add",toEl:P,fromEl:T,originalEvent:e}),z({sortable:this,name:"remove",toEl:P,originalEvent:e}),z({rootEl:P,name:"sort",toEl:P,fromEl:T,originalEvent:e}),z({sortable:this,name:"sort",toEl:P,originalEvent:e})),U&&U.save()):Z!==Oe&&Z>=0&&(z({sortable:this,name:"update",toEl:P,originalEvent:e}),z({sortable:this,name:"sort",toEl:P,originalEvent:e})),b.active&&((null==Z||-1===Z)&&(Z=Oe,ve=Ge),z({sortable:this,name:"end",toEl:P,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){j("nulling",this),T=h=P=_=Te=k=ot=ye=Se=ne=Fe=Z=ve=Oe=Ge=Pe=Le=U=Ze=b.dragged=b.ghost=b.clone=b.active=null,ct.forEach((function(e){e.checked=!0})),ct.length=yt=_t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),Jo(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,i=this.options;a<o;a++)oe(e=n[a],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||ii(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];oe(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return oe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=He.modifyOption(this,e,t);n[e]=typeof a<"u"?a:t,"group"===e&&fn(n)},destroy:function(){j("destroy",this);var e=this.el;e[J]=null,S(e,"mousedown",this._onTapStart),S(e,"touchstart",this._onTapStart),S(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(S(e,"dragover",this),S(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ye){if(j("hideClone",this),b.eventCanceled)return;v(k,"display","none"),this.options.removeCloneOnHide&&k.parentNode&&k.parentNode.removeChild(k),ye=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ye){if(j("showClone",this),b.eventCanceled)return;h.parentNode!=T||this.options.group.revertClone?Te?T.insertBefore(k,Te):T.appendChild(k):T.insertBefore(k,h),this.options.group.revertClone&&this.animate(h,k),v(k,"display",""),ye=!1}}else this._hideClone()}},mt&&I(document,"touchmove",(function(e){(b.active||xe)&&e.cancelable&&e.preventDefault()})),b.utils={on:I,off:S,css:v,find:rn,is:function(e,t){return!!oe(e,t,e,!1)},extend:Bo,throttle:ln,closest:oe,toggleClass:K,clone:un,index:ee,nextTick:at,cancelNextTick:Pt,detectDirection:pn,getChild:Ne},b.get=function(e){return e[J]},b.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(b.utils=se(se({},b.utils),e.utils)),He.mount(e)}))},b.create=function(e,t){return new b(e,t)},b.version=Uo;var Ue,xt,Et,St,pt,Re,N=[],Ot=!1;function ri(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):t.touches?I(document,"touchmove",this._handleFallbackAutoScroll):I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):(S(document,"pointermove",this._handleFallbackAutoScroll),S(document,"touchmove",this._handleFallbackAutoScroll),S(document,"mousemove",this._handleFallbackAutoScroll)),jt(),rt(),Go()},nulling:function(){pt=xt=Ue=Ot=Re=Et=St=null,N.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(a,o);if(pt=e,t||this.options.forceAutoScrollFallback||Ye||he||Xe){It(e,this.options,i,t);var l=_e(i,!0);Ot&&(!Re||a!==Et||o!==St)&&(Re&&jt(),Re=setInterval((function(){var i=_e(document.elementFromPoint(a,o),!0);i!==l&&(l=i,rt()),It(e,n.options,i,t)}),10),Et=a,St=o)}else{if(!this.options.bubbleScroll||_e(i,!0)===le())return void rt();It(e,this.options,_e(i,!1),!1)}}},pe(e,{pluginName:"scroll",initializeByDefault:!0})}function rt(){N.forEach((function(e){clearInterval(e.pid)})),N=[]}function jt(){clearInterval(Re)}var It=ln((function(e,t,n,a){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,u=le(),d=!1;xt!==n&&(xt=n,rt(),Ue=t.scroll,o=t.scrollFn,!0===Ue&&(Ue=_e(n,!0)));var c=0,p=Ue;do{var h=p,m=A(h),f=m.top,g=m.bottom,y=m.left,w=m.right,_=m.width,D=m.height,S=void 0,I=void 0,T=h.scrollWidth,k=h.scrollHeight,E=v(h),C=h.scrollLeft,x=h.scrollTop;h===u?(S=_<T&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),I=D<k&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(S=_<T&&("auto"===E.overflowX||"scroll"===E.overflowX),I=D<k&&("auto"===E.overflowY||"scroll"===E.overflowY));var O=S&&(Math.abs(w-i)<=r&&C+_<T)-(Math.abs(y-i)<=r&&!!C),P=I&&(Math.abs(g-l)<=r&&x+D<k)-(Math.abs(f-l)<=r&&!!x);if(!N[c])for(var M=0;M<=c;M++)N[M]||(N[M]={});(N[c].vx!=O||N[c].vy!=P||N[c].el!==h)&&(N[c].el=h,N[c].vx=O,N[c].vy=P,clearInterval(N[c].pid),(0!=O||0!=P)&&(d=!0,N[c].pid=setInterval(function(){a&&0===this.layer&&b.active._onTouchMove(pt);var t=N[this.layer].vy?N[this.layer].vy*s:0,n=N[this.layer].vx?N[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(b.dragged.parentNode[J],n,t,e,pt,N[this.layer].el)||sn(N[this.layer].el,n,t)}.bind({layer:c}),24))),c++}while(t.bubbleScroll&&p!==u&&(p=_e(p,!1)));Ot=d}}),30),gn=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var s=n||o;l();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(u.clientX,u.clientY);r(),s&&!s.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function At(){}function Vt(){}At.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Ne(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:gn},pe(At,{pluginName:"revertOnSpill"}),Vt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:gn},pe(Vt,{pluginName:"removeOnSpill"}),b.mount(new ri),b.mount(Vt,At);const li="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2016.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='936.091px'%20height='936.091px'%20viewBox='0%200%20936.091%20936.091'%20style='enable-background:new%200%200%20936.091%20936.091'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M562.292,715.212l-41.747,42.25V178.628l41.747,42.25c20.379,20.625,53.62,20.825,74.245,0.445%20c20.625-20.379,20.824-53.619,0.445-74.244L507.071,15.601c-20.379-20.626-53.62-20.825-74.245-0.445L299.554,146.837%20c-20.625,20.379-20.824,53.619-0.445,74.244c10.271,10.395,23.806,15.601,37.348,15.601c13.33,0,26.667-5.046,36.897-15.155%20l42.192-41.688v576.414l-42.192-41.688c-20.625-20.381-53.865-20.182-74.245,0.445c-20.379,20.625-20.18,53.865,0.445,74.244%20l133.272,131.682c9.83,9.713,23.089,15.154,36.898,15.154c0.104,0,0.211,0,0.315,0c13.923-0.084,27.244-5.695,37.03-15.602%20l129.911-131.479c20.38-20.625,20.181-53.865-0.444-74.244C615.912,694.386,582.67,694.585,562.292,715.212z'/%3e%3c/g%3e%3c/svg%3e",gt=e=>(ft("data-v-d0052579"),e=e(),ht(),e),si={class:"gallery-item"},ui=["href"],di=["src","alt"],ci={class:"gallery-meta"},pi={class:"filename-wrapper"},fi=gt((()=>d("span",{class:"text-bold"},"Name: ",-1))),hi={class:"control-buttons"},mi=gt((()=>d("img",{alt:"Move via drag'n'drop",class:"handle",src:li,title:"Move picture up or down"},null,-1))),gi=gt((()=>d("svg",{height:"36",width:"36"},[d("path",{d:"M2 25h32L18 9 2 25Z"})],-1))),vi=[gi],bi=gt((()=>d("svg",{height:"36",width:"36"},[d("path",{d:"M2 11h32L18 27 2 11Z"})],-1))),yi=[bi],_i=te({__name:"GalleryItem",props:{fileItem:{}},setup(e){const t=ue(),{imageData:n}=fe(t),{gallery:a}=ce(n.value);function o(e,t){const n=a.value.indexOf(e);if(-1===n)throw new Error("Couldn't find item!");if("up"===t&&n)a.value.splice(n-1,0,e),a.value.splice(n+1,1);else if("down"===t&&n!==a.value.length-1){const t=a.value.filter((t=>t!==e));t.splice(n+1,0,e),a.value=t}}return(e,t)=>(y(),D("article",si,[d("a",{href:e.fileItem.url,class:"gallery-media",rel:"noopener noreferrer",target:"_blank"},[d("img",{src:e.fileItem.url,alt:e.fileItem.file?.name??e.fileItem.desc},null,8,di)],8,ui),d("div",ci,[d("p",pi,[fi,Ce(Y(e.fileItem.file?.name??e.fileItem.filename),1)]),d("div",null,[C(d("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.fileItem.desc=t),placeholder:"Description",type:"text"},null,512),[[V,e.fileItem.desc,void 0,{trim:!0}]])])]),d("div",hi,[d("button",{class:"delete-icon is-clickable",title:"Remove picture from gallery",type:"button",onClick:t[1]||(t[1]=t=>function(e){URL.revokeObjectURL(e.url),a.value=a.value.filter((t=>t!==e))}(e.fileItem))}," ❌ "),mi,d("button",{class:"button move-button","data-move":"up",title:"Move up",type:"button",onClick:t[2]||(t[2]=t=>o(e.fileItem,"up"))},vi),d("button",{class:"button move-button","data-move":"down",title:"Move down",type:"button",onClick:t[3]||(t[3]=t=>o(e.fileItem,"down"))},yi)])]))}}),wi=Ae(_i,[["__scopeId","data-v-d0052579"]]),Di=["for"],Ei={class:"text-center text-bold"},Si=["id","multiple"],Ii={key:0},Ti=te({__name:"GenericFileUpload",props:{infoboxImageInGallery:{type:Boolean},multiple:{type:Boolean},backgroundImageUrl:{},id:{},caption:{}},emits:["upload"],setup(e,{emit:t}){const n=t,a=ie(!1),o=ue(),{imageData:i}=fe(o),{image:l}=ce(i.value);function r(e){const{target:t}=e;!(t instanceof HTMLInputElement)||!t.files||n("upload",t.files)}function s(e){a.value=!1;const t=e.dataTransfer?.files;t?.length&&n("upload",t)}return(e,t)=>(y(),D(R,null,[d("label",{class:$t([{"drag-active":a.value},"drop-container"]),for:e.id,style:Sn(e.backgroundImageUrl?`background-image:url(${e.backgroundImageUrl})`:void 0),onDragenter:t[0]||(t[0]=e=>a.value=!0),onDragleave:t[1]||(t[1]=e=>a.value=!1),onDrop:Ct(s,["prevent"]),onDragover:t[2]||(t[2]=Ct((()=>{}),["prevent"]))},[d("span",Ei,Y(e.caption),1),d("input",{id:e.id,multiple:e.multiple,accept:"image/*",type:"file",onChange:r},null,40,Si)],46,Di),e.infoboxImageInGallery?(y(),D("div",Ii,Y(m(l).file?.name)+" is already in the infobox and therefore wasn't added to the gallery. ",1)):O("",!0)],64))}}),vn=Ae(Ti,[["__scopeId","data-v-320e877c"]]),Ci=te({__name:"FileUpload",setup(e){const t=ie(!1),n=ue(),{imageData:a}=fe(n),{gallery:o,image:i}=ce(a.value);function l(e){const n=Array.from(e);t.value=n.map((e=>e.name)).includes(i.value.file?.name??"");!function(e){for(const t of e)o.value.unshift({id:r++,desc:"",url:URL.createObjectURL(t),filename:t.name,file:t})}(t.value?n.filter((e=>e.name!==i.value.file?.name)):n)}let r=0;return(e,n)=>(y(),ze(vn,{"infobox-image-in-gallery":t.value,caption:"Drop gallery files here",id:"galleryImageInput",multiple:"",onUpload:l},null,8,["infobox-image-in-gallery"]))}}),ki=e=>(ft("data-v-9a92eab3"),e=e(),ht(),e),Pi={key:0,class:"gallery-preview-header"},xi=ki((()=>d("p",{class:"preview-caption has-text-weight-bold"},"Gallery Preview",-1))),Oi=te({__name:"Gallery",setup(e){const t=ie(null),n=ie(!1);en((()=>{t.value&&new b(t.value,{handle:".handle",animation:250,onUpdate:l})}));const a=ue(),{imageData:o}=fe(a),{gallery:i}=ce(o.value);function l(e){const t=e.oldIndex,n=e.newIndex;if("number"!=typeof t||"number"!=typeof n)return;const a=i.value.splice(t,1);i.value.splice(n,0,a[0])}const r=()=>n.value=!n.value;return(e,a)=>(y(),D(R,null,[be(Ci),m(i).length?(y(),D("div",Pi,[xi,d("button",{class:"show-hide-button",type:"button",onClick:r},Y(n.value?"Show":"Hide"),1)])):O("",!0),C(d("div",{ref_key:"filePreview",ref:t,class:"gallery-preview"},[(y(!0),D(R,null,We(m(i),(e=>(y(),ze(wi,{key:e.id,"file-item":e},null,8,["file-item"])))),128))],512),[[Qt,m(i).length&&!n.value]])],64))}}),$i=Ae(Oi,[["__scopeId","data-v-9a92eab3"]]),Ni=te({__name:"ImageInput",setup(e){const t=ue(),{imageData:n}=fe(t),{image:a}=ce(n.value);function o(e){!function(e){URL.revokeObjectURL(a.value.url),a.value.file=e,a.value.filename=e.name,a.value.url=URL.createObjectURL(e)}(e[0])}return(e,t)=>(y(),ze(vn,{"background-image-url":m(a).url,caption:"Drop main image here",id:"mainImageInput",onUpload:o},null,8,["background-image-url"]))}}),M=e=>(ft("data-v-6a8c68f1"),e=e(),ht(),e),Ai=M((()=>d("p",{class:"question required",id:"base-name"}," What is the name of your base? ",-1))),Vi=M((()=>d("p",{class:"question required",id:"system-name"}," What is the name of the system where your base is? ",-1))),Mi=M((()=>d("p",{class:"subtitle"},"The name of the system can be seen by looking at the galaxy map in space.",-1))),Fi=M((()=>d("p",{class:"question required",id:"planet-name"}," What is the name of the planet on which your base is or that is orbited by the moon on which your base is? ",-1))),Ui=M((()=>d("p",{class:"question",id:"moon-name"}," If your base is on a moon (else leave empty): What is the name of the moon? ",-1))),Ri=M((()=>d("p",{class:"question required",id:"geo-coords"}," What are the planetary coordinates of your base? ",-1))),Xi=M((()=>d("p",{class:"subtitle"},"You can find the coordinates when you look through your visor. Example: -14.24, +121.12",-1))),Bi=["aria-invalid"],Gi={key:0,class:"error"},Li=M((()=>d("p",{class:"question required",id:"glyph-input"}," What are the glyphs? ",-1))),qi=M((()=>d("p",{class:"subtitle"},"Glyphs can be found in photo mode",-1))),Wi=M((()=>d("p",{class:"question"},"Base Features: Check all that apply:",-1))),zi={class:"checkboxes"},Yi=["onUpdate:modelValue"],Hi=M((()=>d("p",{class:"question required"},"On which platform was the base built?",-1))),ji=M((()=>d("p",{class:"question required"},"On which Game Mode was the base built?",-1))),Ki=M((()=>d("p",{class:"question",id:"base-type"}," What type of base is it? What is its purpose? ",-1))),Zi=M((()=>d("p",{class:"subtitle"},"Some examples are Artistic, Embassy, Farm, Industrial, Memorial and Residential.",-1))),Ji={class:"async-section-title-wrapper"},Qi={key:0,class:"subtitle"},ea=["onUpdate:modelValue","aria-label"],ta=M((()=>d("p",{class:"question required"},"Main picture",-1))),na=M((()=>d("p",{class:"subtitle"},"Picture clearly showing the entire base",-1))),oa=M((()=>d("p",{class:"question"},"Gallery",-1))),ia=M((()=>d("p",{class:"subtitle"},"Other pictures",-1))),aa=te({__name:"BaseData",setup(e){const t=ue(),{baseData:n,isAxesValid:a,sectionData:o}=fe(t),{landingpad:i,terminal:l,geobay:r,farm:s,racetrack:u,arena:c}=ce(n.value),p=tn([{label:"Landing Pad",value:i},{label:"Trade Terminal",value:l},{label:"Geobay",value:r},{label:"Farm",value:s},{label:"Racetrack",value:u},{label:"Arena",value:c}]);return(e,t)=>(y(),D(R,null,[d("article",null,[Ai,C(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m(n).baseName=e),"aria-labelledby":"base-name",type:"text"},null,512),[[V,m(n).baseName,void 0,{trim:!0}]])]),m(lt)?O("",!0):(y(),D(R,{key:0},[d("article",null,[Vi,Mi,C(d("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m(n).system=e),"aria-labelledby":"system-name",type:"text"},null,512),[[V,m(n).system,void 0,{trim:!0}]])]),d("article",null,[Fi,C(d("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>m(n).planet=e),"aria-labelledby":"planet-name",type:"text"},null,512),[[V,m(n).planet,void 0,{trim:!0}]])]),d("article",null,[Ui,C(d("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>m(n).moon=e),"aria-labelledby":"moon-name",type:"text"},null,512),[[V,m(n).moon,void 0,{trim:!0}]])]),d("article",null,[Ri,Xi,C(d("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>m(n).axes=e),"aria-invalid":!m(a)||void 0,"aria-labelledby":"geo-coords",type:"text"},null,8,Bi),[[V,m(n).axes,void 0,{trim:!0,lazy:!0}]]),m(a)?O("",!0):(y(),D("p",Gi," Please give the coordinates like in the example above, including + and - "))]),d("article",null,[Li,qi,be(Ao,{modelValue:m(n).glyphs,"onUpdate:modelValue":t[5]||(t[5]=e=>m(n).glyphs=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])],64)),d("article",null,[Wi,d("div",zi,[(y(!0),D(R,null,We(p,(e=>(y(),D("label",null,[C(d("input",{"onUpdate:modelValue":t=>e.value=t,type:"checkbox"},null,8,Yi),[[Zt,e.value,void 0,{trim:!0}]]),d("span",null,Y(e.label),1)])))),256))])]),m(lt)?O("",!0):(y(),D(R,{key:1},[d("article",null,[Hi,be(Xt,{modelValue:m(n).platform,"onUpdate:modelValue":t[6]||(t[6]=e=>m(n).platform=e),modelModifiers:{trim:!0},items:m(In),name:"platform"},null,8,["modelValue","items"])]),d("article",null,[ji,be(Xt,{modelValue:m(n).mode,"onUpdate:modelValue":t[7]||(t[7]=e=>m(n).mode=e),modelModifiers:{trim:!0},items:m(Tn),name:"mode"},null,8,["modelValue","items"])])],64)),d("article",null,[Ki,Zi,C(d("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>m(n).type=e),"aria-labelledby":"base-type",type:"text"},null,512),[[V,m(n).type,void 0,{trim:!0}]])]),(y(!0),D(R,null,We(m(o),(e=>(y(),D("article",{key:e.heading},[d("div",Ji,[d("p",{class:$t([{required:e.required},"question"])},Y(e.heading),3),e.loading?(y(),ze(Cn,{key:0})):O("",!0)]),e.explanation?(y(),D("p",Qi,Y(e.explanation),1)):O("",!0),C(d("textarea",{"onUpdate:modelValue":t=>e.body=t,"aria-label":e.heading},null,8,ea),[[V,e.body,void 0,{trim:!0}]])])))),128)),d("article",null,[ta,na,be(Ni)]),d("article",null,[oa,ia,be($i)])],64))}}),ra=Ae(aa,[["__scopeId","data-v-6a8c68f1"]]),la=te({__name:"BaseForm",props:{page:{}},setup(e){const t=e,n={1:fo,2:ra},a=$((()=>n[t.page]));return(e,t)=>(y(),ze(m(a)))}});function sa(){const e=ue(),{validation:t,playerData:n,baseData:a,region:o,isDiscordValid:i,isRedditValid:l,isSocialValid:r,isNameValid:s,isFriendValid:u,isAxesValid:d,isImageDataValid:c,sectionData:p}=fe(e),{wikiUserExists:h}=ce(t.value),m=tn({discord:i,reddit:l,social:r,name:s,friend:u,wikiName:h}),{isDataValid:v,missingProps:f}=Kt(n),{isDataValid:g,missingProps:b}=Kt(a),{isDataValid:y,missingProps:w}=ua(m),_=$((()=>[...f.value,...w.value])),D=$((()=>v.value&&y.value)),S=$((()=>p.value.filter((e=>e.required&&!e.body)).map((e=>e.heading)))),I=$((()=>!S.value.length)),T=$((()=>g.value&&I.value&&c.value&&o.value&&d.value)),k=$((()=>[...b.value,...S.value,...c.value?[]:["image"],...o.value?[]:["region"],...d.value?[]:["axes"]]));return{isAllDataValid:$((()=>D.value&&T.value)),allMissingProps:$((()=>[..._.value,...k.value])),isPageTwoDataValid:T,missingPageTwoProps:k,isPageOneValid:D,missingPageOneProps:_}}function ua(e){const t=$((()=>Object.entries(e))),n=$((()=>t.value.filter((e=>!e[1])))),a=$((()=>n.value.map((e=>e[0]))));return{isDataValid:$((()=>!a.value.length)),missingProps:a}}function Kt(e){const t=$((()=>Object.entries(e.value))),n=$((()=>t.value.filter((e=>kn(e[0])&&!Pn.includes(e[0]))))),a=$((()=>n.value.filter((e=>!e[1]&&"boolean"!=typeof e[1])))),o=$((()=>a.value.map((e=>e[0]))));return{isDataValid:$((()=>!a.value.length)),missingProps:o}}const da=d("h1",{class:"title"},"Eisvana Census Form",-1),ca=["href","aria-disabled"],pa={key:0},fa=d("a",{class:"secondary",href:"#",role:"button"},"Back",-1),ha=["aria-busy","disabled"],ma={key:0},ga={key:1},va=d("header",{class:"thank-you-wrapper"},[d("p",{class:"text-bold thank-you"},"Thank you for registering!")],-1),ba=d("p",null,[Ce(" We're excited to have you join us in Eisvana!"),d("br"),Ce("We'll let you know when your submission has been processed. ")],-1),ya=d("p",null,[Ce("If you want to learn more about Eisvana, "),d("a",{href:"https://eisvana.com/"},"visit our website"),Ce("!")],-1),_a=[va,ba,ya],wa={key:2},Da=d("header",{class:"thank-you-wrapper"},[d("p",{class:"text-bold thank-you"},"Thank you for updating your census entry!")],-1),Ea=d("p",null,"We'll let you know when your submission has been processed.",-1),Sa=d("p",null,"You can now close this window.",-1),Ia=[Da,Ea,Sa],xa=te({__name:"CensusForm",setup(e){const{isAllDataValid:t,allMissingProps:n,isPageOneValid:a,missingPageOneProps:o}=sa(),i=ie(window.location.hash),l=ue();i.value&&!a.value&&(window.location.hash=""),addEventListener("hashchange",(()=>i.value=window.location.hash));const r=$((()=>"#2"===i.value&&a.value?2:1)),s=ie(!1),u=ie(!1),c=ie(!1),p=ie(!1),h=tt?"censusForm":Rt?"newBase":"updateBase";async function v(){u.value=!0;const e=sessionStorage.getItem("update"),t=JSON.parse(e??"{}").Name??"",n=Rt?`New Page for existing citizen. Old page: ${$n(t)}`:"Updated Base Page",a=tt?"New Citizen":n;try{await On(a),l.resetStore(),localStorage.removeItem("censusForm"),localStorage.removeItem("updateBase"),localStorage.removeItem("newBase"),localStorage.removeItem("lastUpdated"),sessionStorage.removeItem("update"),p.value=!0}catch(e){c.value=!0,console.error("Something went wrong:",e)}finally{u.value=!1,setTimeout((()=>{c.value=!1}),Nn)}}function f(){a.value&&scrollTo(0,0)}en((async()=>{l.fetchVersionTemplate(),lt&&(await l.fetchBaseWikiData(),l.$subscribe((()=>s.value||=!0)))}));const g=$((()=>u.value?"":c.value?"Failed!":"Submit"));return l.$subscribe(((e,t)=>{localStorage.setItem(h,JSON.stringify(t,xn)),localStorage.setItem("lastUpdated",Date.now().toString())})),(e,i)=>(y(),D(R,null,[da,d("form",{class:"questions",onSubmit:Ct(v,["prevent"])},[p.value?m(tt)?(y(),D("article",ga,_a)):(y(),D("article",wa,Ia)):(y(),D(R,{key:0},[be(la,{page:r.value},null,8,["page"]),d("div",null,[1===r.value?(y(),D(R,{key:0},[d("a",{href:m(a)?"#2":void 0,"aria-disabled":!m(a),role:"button",onClick:f}," Continue ",8,ca),m(o).length?(y(),D("p",pa,"Missing Data: "+Y(m(o).join(", ")),1)):O("",!0)],64)):O("",!0),2===r.value?(y(),D(R,{key:1},[fa,d("button",{"aria-busy":u.value,class:$t([{"is-danger":c.value},"submit-button"]),disabled:!m(t)||m(lt)&&!s.value,type:"submit"},Y(g.value),11,ha),m(n).length?(y(),D("p",ma,"Missing Data: "+Y(m(n).join(", ")),1)):O("",!0)],64)):O("",!0)])],64))],32)],64))}});export{xa as default};
