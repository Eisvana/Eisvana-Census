import{d as y,o as n,c as l,a as t,t as p,r as m,B as b,a0 as O,s as R,G as z,J as N,m as j,I as B,a9 as M,aa as q,_ as $,i as h,F as C,k as d}from"./main-DxgA01JS.js";import{r as T,b as D,d as F}from"./delay-Dh76jFQY.js";const I=t("button",{"aria-label":"Close",class:"close",form:"renew-close-form"},null,-1),L={class:"text-center"},V={class:"confirm-options",id:"renew-close-form",method:"dialog"},J=t("button",{class:"secondary"},"Cancel",-1),W=y({__name:"ConfirmDialog",props:{userName:{}},emits:["confirm"],setup:(e,{emit:a})=>(e,a)=>(n(),l("article",null,[t("header",null,[I,t("p",L,"Confirm renewal of "+p(e.userName)+"?",1)]),t("form",V,[t("button",{onClickOnce:a[0]||(a[0]=a=>e.$emit("confirm"))},"Renew",32),J])]))});async function A(e){await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`${e.CensusPlayer} requested renewal.\n<${D(e.Name)}>`})})}function S(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}const G=["aria-busy","disabled"],H=y({__name:"RenewButton",props:{userObject:{},buttonText:{},buttonTextFailed:{},buttonTextSuccess:{}},setup(e){const a=e,s=m(!1),u=m(!1),o=m(!1),c=m(null);function i(){S(),c.value?.showModal(),S()}const r=()=>c.value?.close(),d=b((()=>s.value?"":u.value?a.buttonTextFailed:o.value&&a.buttonTextSuccess?a.buttonTextSuccess:a.buttonText)),v=O(),{tries:y,requested:f,triesExceeded:g}=R(v),k=b((()=>g.value||a.userObject.renewRequested||a.userObject.renewed));async function C(){if(!T||k.value)return;const e=a.userObject.CensusPlayer;s.value=!0;try{await A(a.userObject),o.value=!0,a.userObject.renewRequested=!0,q(f,y,e)}catch(e){u.value=!0,console.warn(e)}finally{s.value=!1,setTimeout((()=>{o.value=!1,u.value=!1}),F)}}return(e,a)=>(n(),l("div",null,[t("button",{"aria-busy":s.value,class:z([{"is-danger":u.value},"renew-button"]),disabled:k.value,type:"button",onClick:i},p(d.value),11,G),(n(),N(M,{to:"body"},[t("dialog",{ref_key:"dialogElement",ref:c,onClick:B(r,["self"])},[j(W,{"user-name":e.userObject.CensusPlayer,onConfirm:C},null,8,["user-name"])],512)]))]))}}),re=$(H,[["__scopeId","data-v-a65da13b"]]),ce=15,de=50,Z={key:0,class:"page-select-wrapper"},K={class:"page-select-item"},Q=["disabled"],U={class:"page-select-item"},X={key:0,class:"placeholder"},Y={key:1,class:"page-select-item"},ee={type:"button"},te={key:2,class:"page-select-item"},se={key:0,class:"placeholder"},ae={class:"page-select-item"},ne={class:"page-select-item"},oe=["disabled"],le=y({__name:"Pagination",props:{data:{},pageSize:{}},emits:["change"],setup(e,{emit:a}){const s=e,u=a,o=m(1),c=b((()=>o.value-1)),i=b((()=>Math.ceil(s.data.length/s.pageSize))),r=b((()=>s.data.slice(c.value*s.pageSize,c.value*s.pageSize+s.pageSize)));return h((()=>{(o.value>i.value||o.value<1)&&(o.value=1)})),h((()=>u("change",r.value))),(e,a)=>i.value>1?(n(),l("div",Z,[t("div",K,[t("button",{disabled:1===o.value,class:"outline",type:"button",onClick:a[0]||(a[0]=e=>o.value--)}," < ",8,Q)]),o.value>2?(n(),l(C,{key:0},[t("div",U,[t("button",{class:"outline",type:"button",onClick:a[1]||(a[1]=e=>o.value=1)}," 1 ")]),o.value-2!=1?(n(),l("div",X," ... ")):d("",!0)],64)):d("",!0),o.value-1>0?(n(),l("div",Y,[(n(),l("button",{key:o.value-1,class:"outline",type:"button",onClick:a[2]||(a[2]=e=>o.value--)},p(o.value-1),1))])):d("",!0),(n(),l("div",{key:o.value,class:"page-select-item"},[t("button",ee,p(o.value),1)])),o.value+1<=i.value?(n(),l("div",te,[(n(),l("button",{key:o.value+1,class:"outline",type:"button",onClick:a[3]||(a[3]=e=>o.value++)},p(o.value+1),1))])):d("",!0),o.value<i.value-1?(n(),l(C,{key:3},[o.value+2!==i.value?(n(),l("div",se," ... ")):d("",!0),t("div",ae,[t("button",{class:"outline",type:"button",onClick:a[4]||(a[4]=e=>o.value=i.value)},p(i.value),1)])],64)):d("",!0),t("div",ne,[t("button",{disabled:o.value===i.value,class:"outline",type:"button",onClick:a[5]||(a[5]=e=>o.value++)}," > ",8,oe)])])):d("",!0)}}),ve=$(le,[["__scopeId","data-v-58998cdc"]]);export{ve as P,re as R,S as b,de as r,ce as t};
