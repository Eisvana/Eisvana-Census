import{a1 as D,d as R,B as h,o as r,c as d,t as l,a0 as W,s as L,T as j,a as e,k as m,m as f,e as y,a2 as b,z as T,A as B,_ as P,$ as J,r as g,i as O,w as x,g as z,a3 as Y,F as C,x as $,a4 as G,J as H,a5 as K}from"./main-D68exycI.js";import{R as Q}from"./RenewButton-BjT5Z-lf.js";import"./delay-BK7pZ3Ms.js";function X(e){const t=e.slice(1,-1).split(" ");return{link:t[0],text:t[1]}}function Z(e){const t=e.slice(2,-2).split("|");return{link:`${D}${t[0]}`,text:t[1]}}function ee(e){return e.startsWith("[http")?X(e):e.startsWith("[[")?Z(e):{link:e,text:e}}const te=["href"],I=R({__name:"LinkItem",props:{wikitext:{},text:{}},setup(e){const t=e,s=h((()=>t.wikitext.startsWith("[")?ee(t.wikitext):{text:t.wikitext,link:`${D}${t.wikitext}`}));return(e,t)=>(r(),d("a",{href:s.value.link,rel:"noopener noreferrer",target:"_blank"},l(e.text??s.value.text),9,te))}}),u=e=>(T("data-v-26c766fd"),e=e(),B(),e),se={class:"census-item"},ne={class:"player-name text-bold"},ae={class:"table-items"},oe={key:0},ie=u((()=>e("div",{class:"heading"},"Discord:",-1))),re={key:1},le=u((()=>e("div",{class:"heading"},"Social Media:",-1))),de={class:"link is-social"},ue={key:2},ce=u((()=>e("div",{class:"heading"},"Friend Code:",-1))),ve={class:"friend-code"},_e=u((()=>e("div",{class:"heading"},"Base:",-1))),he={class:"link"},pe=u((()=>e("div",{class:"heading"},"System:",-1))),me=u((()=>e("div",{class:"heading"},"Platform:",-1))),fe=u((()=>e("div",{class:"heading"},"Mode:",-1))),ye=u((()=>e("div",{class:"heading"},"Arrival:",-1))),we={class:"action-buttons"},ke=["data-tooltip"],Ce=["href"],Re=["href"],Se=R({__name:"CensusItem",props:{entry:{}},setup(t){const s=t,a=W(),{triesExceeded:n}=L(a);function i(){sessionStorage.setItem("update",JSON.stringify(s.entry))}const u=h((()=>s.entry.renewed?"Already renewed":s.entry.renewRequested?"Renewal Requested":n.value?"Too Many Requests":`Request Renewal for ${j}`));return(t,s)=>(r(),d("article",se,[e("p",ne,l(t.entry.CensusPlayer),1),e("div",ae,[t.entry.CensusDiscord?(r(),d("div",oe,[ie,e("div",null,l(t.entry.CensusDiscord),1)])):m("",!0),t.entry.CensusReddit?(r(),d("div",re,[le,e("div",de,[f(I,{wikitext:t.entry.CensusReddit},null,8,["wikitext"])])])):m("",!0),t.entry.CensusFriend?(r(),d("div",ue,[ce,e("div",ve,l(t.entry.CensusFriend),1)])):m("",!0),e("div",null,[_e,e("div",he,[f(I,{wikitext:t.entry.Name},null,8,["wikitext"])])]),e("div",null,[pe,e("div",null,l(t.entry.System),1)]),e("div",null,[me,e("div",null,l(t.entry.Platform),1)]),e("div",null,[fe,e("div",null,l(t.entry.Mode),1)]),e("div",null,[ye,e("div",null,l(t.entry.CensusArrival.toLocaleDateString()),1)])]),e("div",we,[e("div",{"data-tooltip":u.value},[f(Q,{"user-object":t.entry,"button-text":"Renew","button-text-failed":"Failed!","button-text-success":"Renewed!"},null,8,["user-object"])],8,ke),e("a",{href:`./form.html?update=${y(b)(t.entry.CensusPlayer)}`,"data-tooltip":"Update Census Base",role:"button",onClick:i},"Update",8,Ce),e("a",{href:`./form.html?new=${y(b)(t.entry.CensusPlayer)}`,"data-tooltip":"New Census Base",role:"button",onClick:i},"New",8,Re)])]))}}),be=P(Se,[["__scopeId","data-v-26c766fd"]]),S=e=>(T("data-v-ffbd0afa"),e=e(),B(),e),ge=S((()=>e("h1",{class:"title"},"Eisvana Census Table",-1))),xe={class:"layout-table"},$e={class:"top-row"},Ie=S((()=>e("option",{value:""},"All",-1))),De=["value"],Le=S((()=>e("hr",null,null,-1))),Te={key:0,class:"census-items"},Be=R({__name:"Table",setup(t){const s=J(),{censusData:a,availableRevisions:n}=L(s),i=g(""),u=g("");function o({Name:e,CensusPlayer:t,CensusDiscord:s,CensusReddit:a,Mode:l,Platform:n,System:r,CensusFriend:d,CensusRenewal:o}){return!(i.value&&!o.includes(i.value))&&[e,t,s,a,l,n,r,d].map((e=>e?.trim().toLowerCase())).some((e=>e?.includes(u.value.toLowerCase())))}O((()=>i.value=n.value[0]?.toString()));const v=h((()=>i.value?a.value.filter((e=>e.CensusRenewal.includes(i.value))):a.value)),c=h((()=>v.value.length)),p=h((()=>v.value.filter(o).toReversed()));return(t,s)=>(r(),d(C,null,[ge,e("div",xe,[e("div",$e,[e("p",null,"Census count: "+l(c.value),1),e("div",null,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),type:"search"},null,512),[[z,u.value,void 0,{trim:!0}]])]),e("div",null,[x(e("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e)},[Ie,(r(!0),d(C,null,$(y(n),(e=>(r(),d("option",{value:e},l(e),9,De)))),256))],512),[[Y,i.value,void 0,{trim:!0}]])])]),Le,f(K,null,{default:G((()=>[y(a).length?(r(),d("div",Te,[(r(!0),d(C,null,$(p.value,(e=>(r(),H(be,{entry:e,key:e.CensusPlayer},null,8,["entry"])))),128))])):m("",!0)])),_:1})])],64))}}),Ae=P(Be,[["__scopeId","data-v-ffbd0afa"]]);export{Ae as default};
